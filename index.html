<html lang=en>
 <head>
  <meta charset=UTF-8><meta name=viewport
      content="width=device-width, initial-scale=1">
  <title>40Ants Doc Manual</title>
  <link rel=alternate
        href="https://40ants.com/doc/changelog.xml"
        type="application/rss+xml">
  <link rel=stylesheet type="text/css"
        href=theme.css>
  <script type="text/javascript" src=jquery.js></script>
  <script type="text/javascript" src=toc.js></script>
  <script type="text/javascript">$(document).ready(function() {$('a:has(img)').css('border-bottom', 'none')})</script>
  <link rel=stylesheet type="text/css"
      href=highlight.min.css>
  <script type="text/javascript"
          src=highlight.min.js></script>
  <script type="text/javascript">hljs.highlightAll();</script>
<style type="text/css">
/* Стили для сворачиваемого меню */
.sidebar ul ul {
  display: none; /* Скрываем все подменю по умолчанию */
  margin-left: 0.5em;
}

.sidebar li.expanded > ul {
  display: block; /* Показываем подменю для развернутых элементов */
}

/* Стили для пунктов с подменю */
.sidebar li.has-children > a {
  cursor: pointer;
  position: relative;
  padding-left: 1.2em;
}

.sidebar li.has-children > p > a {
  position: relative;
  left: -1rem;
}

.sidebar li.has-children > p > a::before {
  content:"►";
}

.sidebar li.has-children.expanded > p > a::before {
  content: "▼";
  position: relative;
  left: -0.08rem;
}

/* Подсветка активного пункта */
.sidebar li.active > a {
  font-weight: bold;
}

/* Если активная страница находится в подменю, раскрываем родителя */
.sidebar li.active-parent {
  font-weight: normal;
}

.sidebar li.active-parent > ul {
  display: block;
}
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FL71WXK73K"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-FL71WXK73K');
    </script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(42462884, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
       });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/42462884" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

 </head>
 <body>
  <div class=page><a id=fork-me href="https://github.com/40ants/doc">Fork me on GitHub</a>
   <div class=navbar>
    <div class=navbar-inner>
     <a class=brand href="/">
      <img class=logo
           src="https://40ants.com/img/logo.svg"></a>
     <ul class=nav>
      <li><a href="/posts/">Blog</a>
      <li><a href="/ru/posts/">Blog (RU)</a>
      <li><a href="/tips/">Lisp Tips</a>
      <li><a href="/projects/">Our Projects</a>
      <li><a href="/about/">About</a>
     </ul>
    </div>
   </div>
   <input type=checkbox id=sidebar-check>
   <label for=sidebar-check>
    <div id=sidebar-trigger>
     <span></span><span></span><span></span>
    </div></label><div class=sidebar><div class=header><form class=search method=GET action="search/">
      <input type=text name=q>
      <input type=submit value=Search><span id=search-progress></span>
     </form>
    </div><div class=content><div class=page-toc><ul><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">40Ants Doc Manual</a></p><ul><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40ABOUT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40ABOUT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">About this fork</a></p><ul><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DIFFERENCE-FROM-MGL-PAX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DIFFERENCE-FROM-MGL-PAX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Why this fork is different</a></p></li></ul></li><li><p><a href="#40-ants-doc-asdf-system-details" data-document="" data-node="40-ants-doc-asdf-system-details">40ANTS-DOC ASDF System Details</a></p></li><li><p><a href="#40-ants-doc-full-asdf-system-details" data-document="" data-node="40-ants-doc-full-asdf-system-details">40ANTS-DOC-FULL ASDF System Details</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LINKS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LINKS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Links</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40BACKGROUND-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40BACKGROUND-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Background</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TUTORIAL-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TUTORIAL-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Tutorial</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Emacs Integration</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40BASICS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40BASICS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Basics</a></p><ul><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DEFINING-SECTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DEFINING-SECTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Defining Sections</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40CROSS-REFERENCING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40CROSS-REFERENCING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Cross-referencing</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40AUTODOC-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40AUTODOC-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Autodocumentation</a></p></li></ul></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40GENERATING-DOCUMENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40GENERATING-DOCUMENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Generating Documentation</a></p><ul><li><p><a href="#x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40RENDERING-MULTIPLE-FORMATS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40RENDERING-MULTIPLE-FORMATS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Multiple Formats</a></p></li><li><p><a href="#x-2840ANTS-DOC-2FCHANGELOG-3A-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-2FCHANGELOG-3A-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Changelog Generation</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FGITHUB-3A-3A-40GITHUB-WORKFLOW-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FGITHUB-3A-3A-40GITHUB-WORKFLOW-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Github Workflow</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FWORLD-3A-3A-40WORLD-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FWORLD-3A-3A-40WORLD-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">PAX World</a></p></li></ul></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-SUPPORT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-SUPPORT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Markdown Support</a></p><ul><li><p><a href="#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-INDENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-INDENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Indentation</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Images</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-SYNTAX-HIGHLIGHTING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-SYNTAX-HIGHLIGHTING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Syntax highlighting</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MATHJAX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MATHJAX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">MathJax</a></p></li></ul></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DOCUMENTATION-PRINTER-VARIABLES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DOCUMENTATION-PRINTER-VARIABLES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Documentation Printer Variables</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVE-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVE-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Locative Types</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EXTENSION-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EXTENSION-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Extension API</a></p><ul><li><p><a href="#x-2840ANTS-DOC-FULL-2FTHEMES-2FDOCS-3A-3A-40DEFINING-A-THEME-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FDOCS-3A-3A-40DEFINING-A-THEME-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Defining a Custom Theme</a></p><ul><li><p><a href="#changing-colors" data-document="" data-node="changing-colors">Changing Colors</a></p></li><li><p><a href="#changing-page-layout" data-document="" data-node="changing-page-layout">Changing Page Layout</a></p></li><li><p><a href="#available-themes" data-document="" data-node="available-themes">Available Themes</a></p></li><li><p><a href="#theme-definition-protocol" data-document="" data-node="theme-definition-protocol">Theme Definition Protocol</a></p></li><li><p><a href="#plugins-api" data-document="" data-node="plugins-api">Plugins API</a></p></li><li><p><a href="#built-in-plugins" data-document="" data-node="built-in-plugins">Built-in Plugins</a></p></li></ul></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVES-AND-REFERENCES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVES-AND-REFERENCES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Locatives and References</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40NEW-OBJECT-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40NEW-OBJECT-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Adding New Object Types</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40REFERENCE-BASED-EXTENSIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40REFERENCE-BASED-EXTENSIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Reference Based Extensions</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40INCLUDING-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40INCLUDING-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Including Images</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40SECTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40SECTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Sections</a></p></li></ul></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Transcripts</a></p><ul><li><p><a href="#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Transcribing with Emacs</a></p></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Transcript API</a></p></li></ul></li><li><p><a href="#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TODO-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TODO-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">TODO</a></p></li></ul></li><li><p><a href="changelog/#x-2840ANTS-DOC-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="changelog/" data-node="x-2840ANTS-DOC-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">ChangeLog</a></p></li></ul>
     </div>
    </div><div class=footer>
     <a href="https://40ants.com/doc">[generated by 40ANTS-DOC]</a>
    </div>
   </div><div class=content role=main><h1>40Ants Doc Manual<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h1><table class="badges">
<tr>
<td><a href="https://github.com/40ants/doc/actions/workflows/ci.yml"><img src="http://github-actions.40ants.com/40ants/doc/matrix.svg?only=ci.run-tests"/></a></td>

<td><a href="https://github.com/40ants/doc/actions/workflows/linter.yml"><img src="http://github-actions.40ants.com/40ants/doc/matrix.svg?only=linter.linter"/></a></td>

<td><a href="https://coveralls.io/github/40ants/doc?branch=master"><img src="https://coveralls.io/repos/github/40ants/doc/badge.svg?branch=master"/></a></td>

<td><img src="https://api.quickdocs.org/badge/doc.svg"/></td>
</tr>
</table><h2>About this fork<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40ABOUT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40ABOUT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>This system is a fork of <a href="https://github.com/melisgl/mgl-pax">MGL-PAX</a>.</p><p>There are a few reasons, why I've created the fork.</p><p>The main goal is to extract a core features into the <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> system
with as little dependencies as possible. This is important, because with <code>MGL-PAX</code>'s
style, you define documentation sections in your library's code, which makes
it dependent on the documentation system. However, heavy weight dependencies
like <code>IRONCLAD</code>, <code>3BMD</code> or <code>SWANK</code> should not be required.</p><p>The seconds goal was to refactor a 3.5k lines of <code>pax.lisp</code> file into
a smaller modules to make navigation easier. This will help any person
who will decide to learn how the documentation builder works. Also,
granular design will make it possible loading subsystems like <code>SLIME</code> or <code>SLY</code>
integration.</p><p>The third goal was to make documentation processing more sequential and hackable.
To introduce hooks for adding new markup languages, and <code>HTML</code> themes.</p><h3>Why this fork is different<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DIFFERENCE-FROM-MGL-PAX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DIFFERENCE-FROM-MGL-PAX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>Here are features already implemented in this fork:</p><ul><li><p>Core system <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> now has only two dependencies on <code>NAMED-READTABLES</code>
  and <code>PYTHONIC-STRING-READER</code>. If you want to compile a documentation, load
  <a href="https://40ants.com/doc/#x-28-23A-28-2815-29-20BASE-CHAR-20-2E-20-2240ants-doc-full-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2815-29-20BASE-CHAR-20-2E-20-2240ants-doc-full-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc-full</code></a> system which will download such dependencies as markdown
  parser and more.</p></li><li><p>Now you don't have to import any locative symbols into your package. Import
  only a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> macro and it will be enough to define documentation for
  your library!</p></li><li><p>Added a warning mechanism, which will issue such warnings on words which looks
  like a symbol, but when real symbol or reference is absent:</p></li></ul><p><code>
  WARNING: Unable to find target for reference #&lt;XREF &quot;FIND-SOURCE&quot; GENERIC-FUNCTION&gt;
           mentioned at 40Ants Doc Manual / Extension API / Reference Based Extensions
</code></p><ul><li><p>Documentation processing now uses CommonDoc as intermediate format, and markup languages
  other than Markdown can be supported.</p></li><li><p>Added a <code>JS</code> search index which will work when you are hosting pages on a static website
  like GitHub pages.</p></li><li><p>It is possible to render pages in multiple formats and having cross references between them.
  See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40RENDERING-MULTIPLE-FORMATS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40RENDERING-MULTIPLE-FORMATS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Multiple Formats</code></a>.</p></li></ul><p>I'm planning to extend this fork even more. Read <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TODO-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TODO-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>todo</code></a> section to learn about
proposed features or <a href="https://github.com/40ants/doc/discussions">start a new discussion</a>
on the GitHub to suggest a new feature.</p><p>See full list of changes in the <a href="https://40ants.com/doc/changelog/#x-2840ANTS-DOC-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/changelog/" data-node="x-2840ANTS-DOC-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>ChangeLog</code></a> section.</p><h2 id="40-ants-doc-asdf-system-details">40ANTS-DOC ASDF System Details</h2><ul><li><p>Version: 0.12.0</p></li><li><p>Description: Allows to put documentation inside lisp files and cross-reference between different entities. Based on <code>MGL-PAX</code>.</p></li><li><p>Licence: <code>MIT</code></p></li><li><p>Author: Alexander Artemenko</p></li><li><p>Mailto: <a href="mailto:svetlyak.40wt@gmail.com">svetlyak.40wt@gmail.com</a></p></li><li><p>Homepage: <a href="https://40ants.com/doc">https://40ants.com/doc</a></p></li><li><p>Bug tracker: <a href="https://github.com/40ants/doc/issues">https://github.com/40ants/doc/issues</a></p></li><li><p>Source control: <a href="https://github.com/40ants/doc">GIT</a></p></li><li><p>Depends on: <a href="https://quickdocs.org/asdf">asdf</a>, <a href="https://quickdocs.org/named-readtables">named-readtables</a>, <a href="https://quickdocs.org/pythonic-string-reader">pythonic-string-reader</a>, <a href="https://quickdocs.org/serapeum">serapeum</a>, <a href="https://quickdocs.org/uiop">uiop</a></p></li></ul><h2 id="40-ants-doc-full-asdf-system-details">40ANTS-DOC-FULL ASDF System Details</h2><ul><li><p>Version: 0.1.0</p></li><li><p>Description: Documentation generator. You will need to load this system, to build documentation for a library which uses <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> system.</p></li><li><p>Licence: <code>MIT</code></p></li><li><p>Author: Alexander Artemenko</p></li><li><p>Mailto: <a href="mailto:svetlyak.40wt@gmail.com">svetlyak.40wt@gmail.com</a></p></li><li><p>Homepage: <a href="https://40ants.com/doc">https://40ants.com/doc</a></p></li><li><p>Bug tracker: <a href="https://github.com/40ants/doc/issues">https://github.com/40ants/doc/issues</a></p></li><li><p>Source control: <a href="https://github.com/40ants/doc.git">GIT</a></p></li><li><p>Depends on: <a href="https://quickdocs.org/40ants-doc">40ants-doc</a>, <a href="https://quickdocs.org/alexandria">alexandria</a>, <a href="https://quickdocs.org/babel">babel</a>, <a href="https://quickdocs.org/cl-fad">cl-fad</a>, <a href="https://quickdocs.org/cl-ppcre">cl-ppcre</a>, <a href="https://quickdocs.org/closer-mop">closer-mop</a>, <a href="https://quickdocs.org/common-doc">common-doc</a>, <a href="https://quickdocs.org/common-html">common-html</a>, <a href="https://quickdocs.org/commondoc-markdown">commondoc-markdown</a>, <a href="https://quickdocs.org/dexador">dexador</a>, <a href="https://quickdocs.org/docs-config">docs-config</a>, <a href="https://quickdocs.org/fare-utils">fare-utils</a>, <a href="https://quickdocs.org/jonathan">jonathan</a>, <a href="https://quickdocs.org/lass">lass</a>, <a href="https://quickdocs.org/local-time">local-time</a>, <a href="https://quickdocs.org/log4cl">log4cl</a>, <a href="https://quickdocs.org/named-readtables">named-readtables</a>, <a href="https://quickdocs.org/pythonic-string-reader">pythonic-string-reader</a>, <a href="https://quickdocs.org/serapeum">serapeum</a>, <a href="https://quickdocs.org/slynk">slynk</a>, <a href="https://quickdocs.org/spinneret">spinneret</a>, <a href="https://quickdocs.org/stem">stem</a>, <a href="https://quickdocs.org/str">str</a>, <a href="https://quickdocs.org/swank">swank</a>, <a href="https://quickdocs.org/tmpdir">tmpdir</a>, <a href="https://quickdocs.org/which">which</a>, <a href="https://quickdocs.org/xml-emitter">xml-emitter</a></p></li></ul><h2>Links<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LINKS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LINKS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>Here is the <a href="https://github.com/40ants/doc">official repository</a> and
the <a href="https://40ants.com/doc">HTML documentation</a> for the latest version.</p><p>This system is a fork of the <a href="https://github.com/melisgl/mgl-pax">MGL-PAX</a>.
Because of massive refactoring, it is incompatible with original repository.</p><h2>Background<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40BACKGROUND-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40BACKGROUND-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>Here is the story behind the <code>MGL-PAX</code>, precursor of <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a>, written
by Gábor Melis.</p><p>As a user, I frequently run into documentation that's incomplete
and out of date, so I tend to stay in the editor and explore the
code by jumping around with <code>SLIME</code>'s <a href="http://common-lisp.net/project/slime/doc/html/Finding-definitions.html#Finding-definitions"><code>M-.</code></a>. As a library
author, I spend a great deal of time polishing code, but precious
little writing documentation.</p><p>In fact, I rarely write anything more comprehensive than docstrings
for exported stuff. Writing docstrings feels easier than writing a
separate user manual and they are always close at hand during
development. The drawback of this style is that users of the library
have to piece the big picture together themselves.</p><p>That's easy to solve, I thought, let's just put all the narrative
that holds docstrings together in the code and be a bit like a
Literate Programming weenie turned inside out. The original
prototype which did almost everything I wanted was this:</p><pre><code class="">(defmacro defsection (name docstring)
  `(defun ,name () ,docstring))</code></pre><p>Armed with <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a>, I soon found myself organizing code following
the flow of user level documentation and relegated comments to
implementational details entirely. However, some portions of
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> docstrings were just listings of all the functions,
macros and variables related to the narrative, and this list was
effectively repeated in the <code>DEFPACKAGE</code> form complete with little
comments that were like section names. A clear violation of
<a href="http://c2.com/cgi/wiki?OnceAndOnlyOnce">OAOO</a>, one of them had to go, so <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> got a list of
symbols to export.</p><p>That was great, but soon I found that the listing of symbols is
ambiguous if, for example, a function, a compiler macro and a class
are named by the same symbol. This did not concern exporting, of
course, but it didn't help readability. Distractingly, on such
symbols, <code>M-.</code> was popping up selection dialogs. There were two
birds to kill, and the symbol got accompanied by a type which was
later generalized into the concept of locatives:</p><pre><code class="lisp">(defsection @introduction ()
  &quot;A single line for one man ...&quot;
  (foo class)
  (bar function))</code></pre><p>After a bit of elisp hacking, <code>M-.</code> was smart enough to disambiguate
based on the locative found in the vicinity of the symbol and
everything was good for a while.</p><p>Then I realized that sections could refer to other sections if there
were a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-3ASECTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-3ASECTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>section</code></a> locative. Going down that path, I soon began to feel
the urge to generate pretty documentation as all the necessary
information was manifest in the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> forms. The design
constraint imposed on documentation generation was that following
the typical style of upcasing symbols in docstrings there should be
no need to explicitly mark up links: if <code>M-.</code> works, then the
documentation generator shall also be able find out what's being
referred to.</p><p>I settled on <a href="https://daringfireball.net/projects/markdown/">Markdown</a> as a reasonably non-intrusive
format, and a few thousand lines later <code>MGL-PAX</code> was born.</p><h2>Tutorial<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TUTORIAL-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TUTORIAL-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p><a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> provides an extremely poor man's Explorable Programming
environment. Narrative primarily lives in so called sections that
mix markdown docstrings with references to functions, variables,
etc, all of which should probably have their own docstrings.</p><p>The primary focus is on making code easily explorable by using
<code>SLIME</code>'s <code>M-.</code> (<code>slime-edit-definition</code>). See how to enable some
fanciness in <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Emacs Integration</code></a>. Generating documentation
from sections and all the referenced items in Markdown or <code>HTML</code>
format is also implemented.</p><p>With the simplistic tools provided, one may accomplish similar
effects as with Literate Programming, but documentation is generated
from code, not vice versa and there is no support for chunking yet.
Code is first, code must look pretty, documentation is code.</p><p>When the code is loaded into the lisp, pressing <code>M-.</code> in <code>SLIME</code> on
the name of the section will take you there. Sections can also refer
to other sections, packages, functions, etc and you can keep exploring.</p><p>Here is an example of how it all works together:</p><pre><code class="commonlisp">(uiop:define-package #:foo-random
  (:nicknames #:40ants-doc-full/tutorial)
  (:documentation &quot;This package provides various utilities for
                   random. See @FOO-RANDOM-MANUAL.&quot;)
  (:use #:common-lisp
        #:40ants-doc)
  (:import-from #:40ants-doc/ignored-words
                #:ignore-words-in-package)
  (:export #:foo-random-state
           #:state
           #:*foo-state*
           #:gaussian-random
           #:uniform-random))

(in-package foo-random)

(defsection @foo-random-manual (:title &quot;Foo Random manual&quot;
                                :ignore-words (&quot;FOO&quot;))
  &quot;Here you describe what's common to all the referenced (and
   exported) functions that follow. They work with *FOO-STATE*,
   and have a :RANDOM-STATE keyword arg. Also explain when to
   choose which.&quot;
  (foo-random-state class)
  (state (reader foo-random-state))
  
  &quot;Hey we can also print states!&quot;
  
  (print-object (method () (foo-random-state t)))
  (*foo-state* variable)
  (gaussian-random function)
  (uniform-random function)
  ;; this is a subsection
  (@foo-random-examples section))

(defclass foo-random-state ()
  ((state :reader state
          :documentation &quot;Returns random foo's state.&quot;)))

(defmethod print-object ((object foo-random-state) stream)
  (print-unreadable-object (object stream :type t)))

(defvar *foo-state* (make-instance 'foo-random-state)
  &quot;Much like *RANDOM-STATE* but uses the FOO algorithm.&quot;)

(defun uniform-random (limit &amp;key (random-state *foo-state*))
  &quot;Return a random number from the between 0 and LIMIT (exclusive)
   uniform distribution.&quot;
  (declare (ignore limit random-state))
  nil)

(defun gaussian-random (stddev &amp;key (random-state *foo-state*))
  &quot;Return not a random number from a zero mean normal distribution with
   STDDEV.&quot;
  (declare (ignore stddev random-state))
  nil)

(defsection @foo-random-examples (:title &quot;Examples&quot;)
  &quot;Let's see the transcript of a real session of someone working
   with FOO:

   ```cl-transcript
   (values (princ :hello) (list 1 2))
   .. HELLO
   =&gt; :HELLO
   =&gt; (1 2)

   (make-instance 'foo-random-state)
   ==&gt; #&lt;FOO-RANDOM-STATE &gt;
   ```&quot;)

</code></pre><p>Generating documentation in a very stripped down markdown format is
easy:</p><pre><code class="lisp">(40ants-doc-full/builder:render-to-string
  @foo-random-manual
  :format :markdown)</code></pre><p>For this example, the generated markdown would look like this:</p><pre><code class="markdown">&lt;a id=&quot;x-28FOO-RANDOM-3A-3A-40FOO-RANDOM-MANUAL-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29&quot;&gt;&lt;/a&gt;

# Foo Random manual

Here you describe what's common to all the referenced (and
exported) functions that follow. They work with [`*foo-state*`][2133],
and have a `:RANDOM-STATE` keyword arg. Also explain when to
choose which.

&lt;a id=&quot;x-28FOO-RANDOM-3AFOO-RANDOM-STATE-20CLASS-29&quot;&gt;&lt;/a&gt;

## [class](9627) `foo-random:foo-random-state` ()

&lt;a id=&quot;x-28FOO-RANDOM-3ASTATE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-20FOO-RANDOM-3AFOO-RANDOM-STATE-29-29&quot;&gt;&lt;/a&gt;

## [reader](0ea2) `foo-random:state` (foo-random-state) ()

Returns random foo's state.

Hey we can also print states!

&lt;a id=&quot;x-28PRINT-OBJECT-20-28METHOD-20NIL-20-28FOO-RANDOM-3AFOO-RANDOM-STATE-20T-29-29-29&quot;&gt;&lt;/a&gt;

## [method](f6fb) `common-lisp:print-object` (object foo-random-state) stream

&lt;a id=&quot;x-28FOO-RANDOM-3A-2AFOO-STATE-2A-20-28VARIABLE-29-29&quot;&gt;&lt;/a&gt;

## [variable](4074) `foo-random:*foo-state*` #&lt;foo-random-state &gt;

Much like `*RANDOM-STATE*` but uses the `FOO` algorithm.

&lt;a id=&quot;x-28FOO-RANDOM-3AGAUSSIAN-RANDOM-20FUNCTION-29&quot;&gt;&lt;/a&gt;

## [function](57e8) `foo-random:gaussian-random` stddev &amp;key (random-state \*foo-state\*)

Return not a random number from a zero mean normal distribution with
`STDDEV`.

&lt;a id=&quot;x-28FOO-RANDOM-3AUNIFORM-RANDOM-20FUNCTION-29&quot;&gt;&lt;/a&gt;

## [function](c8e3) `foo-random:uniform-random` limit &amp;key (random-state \*foo-state\*)

Return a random number from the between 0 and `LIMIT` (exclusive)
uniform distribution.

&lt;a id=&quot;x-28FOO-RANDOM-3A-3A-40FOO-RANDOM-EXAMPLES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29&quot;&gt;&lt;/a&gt;

## Examples

Let's see the transcript of a real session of someone working
with `FOO`:

```cl-transcript
(values (princ :hello) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1 2)

(make-instance 'foo-random-state)
==&gt; #&lt;FOO-RANDOM-STATE &gt;
```

[2133]: #x-28FOO-RANDOM-3A-2AFOO-STATE-2A-20-28VARIABLE-29-29
[9627]: https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/tutorial.lisp#L35
[0ea2]: https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/tutorial.lisp#L36
[f6fb]: https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/tutorial.lisp#L39
[4074]: https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/tutorial.lisp#L42
[c8e3]: https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/tutorial.lisp#L45
[57e8]: https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/tutorial.lisp#L51</code></pre><p><code>MGL-PAX</code> supported the plain text format which was more readble when viewed
from a simple text editor, but I've dropped support for plain text in this fork
because most time documentation are read in the browser these days.</p><p>To render into the files, use <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>40ants-doc-full/builder:render-to-files</code></a>
and <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29"><code>40ants-doc-full/builder:update-asdf-system-docs</code></a> functions.</p><p>Last one can even generate documentation for different, but related
libraries at the same time with the output going to different files,
but with cross-page links being automatically added for symbols
mentioned in docstrings. See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40GENERATING-DOCUMENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40GENERATING-DOCUMENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Generating Documentation</code></a> for
some convenience functions to cover the most common cases.</p><p>Note how <code>(*FOO-STATE* VARIABLE)</code> in the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> form includes its documentation in
<code>@FOO-RANDOM-MANUAL</code>. The symbols <a href="https://40ants.com/doc/#x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>variable</code></a> and <a href="https://40ants.com/doc/#x-28FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>function</code></a> are just two
instances of 'locatives' which are used in <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> to refer to
definitions tied to symbols. See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVE-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVE-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Locative Types</code></a>.</p><p>The transcript in the code block tagged with <code>cl-transcript</code> is
automatically checked for up-to-dateness. See
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Transcripts</code></a>.</p><h2>Emacs Integration<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>Integration into <code>SLIME</code>'s <code>M-.</code> (<code>slime-edit-definition</code>) allows one
to visit the source location of the thing that's identified by a
symbol and the locative before or after the symbol in a buffer. With
this extension, if a locative is the previous or the next expression
around the symbol of interest, then <code>M-.</code> will go straight to the
definition which corresponds to the locative. If that fails, <code>M-.</code>
will try to find the definitions in the normal way which may involve
popping up an xref buffer and letting the user interactively select
one of possible definitions.</p><p><i>Note that the this feature is implemented in terms of
<code>SWANK-BACKEND:FIND-SOURCE-LOCATION</code> and
<code>SWANK-BACKEND:FIND-DEFINITIONS</code> whose support varies across the Lisp
implementations. Sadly, but this integration does not with <code>SLY</code> because
it does not support hooks on finding definition.</i></p><p>In the following examples, pressing <code>M-.</code> when the cursor is on one
of the characters of <code>FOO</code> or just after <code>FOO</code>, will visit the
definition of function <code>FOO</code>:</p><pre><code class="text">function foo
foo function
(function foo)
(foo function)
</code></pre><p>In particular, references in a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> form are in (<code>SYMBOL</code>
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>locative</code></a>) format so <code>M-.</code> will work just fine there.</p><p>Just like vanilla <code>M-.</code>, this works in comments and docstrings. In
this example pressing <code>M-.</code> on <code>FOO</code> will visit <code>FOO</code>'s default
method:</p><pre><code class="lisp">;;;; See FOO `(method () (t t t))` for how this all works.
;;;; But if the locative has semicolons inside: FOO `(method
;;;; () (t t t))`, then it won't, so be wary of line breaks
;;;; in comments.</code></pre><p>With a prefix argument (<code>C-u M-.</code>), one can enter a symbol plus a
locative separated by whitespace to preselect one of the
possibilities.</p><p>The <code>M-.</code> extensions can be enabled by adding this to your Emacs
initialization file (or loading <code>src/pax.el</code>):</p><pre><code class="elisp">;;; M-. integration

(defun 40ants-doc-edit-locative-definition (name &amp;optional where)
  (or (40ants-doc-locate-definition name (40ants-doc-locative-before))
      (40ants-doc-locate-definition name (40ants-doc-locative-after))
      (40ants-doc-locate-definition name (40ants-doc-locative-after-in-brackets))
      ;; support &quot;foo function&quot; and &quot;function foo&quot; syntax in
      ;; interactive use
      (let ((pos (cl-position ?\s name)))
        (when pos
          (or (40ants-doc-locate-definition (cl-subseq name 0 pos)
                                            (cl-subseq name (1+ pos)))
              (40ants-doc-locate-definition (cl-subseq name (1+ pos))
                                            (cl-subseq name 0 pos)))))))

(defun 40ants-doc-locative-before ()
  (ignore-errors (save-excursion
                   (slime-beginning-of-symbol)
                   (slime-last-expression))))

(defun 40ants-doc-locative-after ()
  (ignore-errors (save-excursion
                   (slime-end-of-symbol)
                   (slime-forward-sexp)
                   (slime-last-expression))))

(defun 40ants-doc-locative-after-in-brackets ()
  (ignore-errors (save-excursion
                   (slime-end-of-symbol)
                   (skip-chars-forward &quot;`&quot; (+ (point) 1))
                   (when (and (= 1 (skip-chars-forward &quot;\\]&quot; (+ (point) 1)))
                              (= 1 (skip-chars-forward &quot;\\[&quot; (+ (point) 1))))
                     (buffer-substring-no-properties
                      (point)
                      (progn (search-forward &quot;]&quot; nil (+ (point) 1000))
                             (1- (point))))))))

(defun 40ants-doc-locate-definition (name locative)
  (when locative
    (let ((location
           (slime-eval
            ;; Silently fail if mgl-pax is not loaded.
            `(cl:when (cl:find-package :mgl-pax)
                      (cl:funcall
                       (cl:find-symbol
                        (cl:symbol-name :locate-definition-for-emacs) :mgl-pax)
                       ,name ,locative)))))
      (when (and (consp location)
                 (not (eq (car location) :error)))
        (slime-edit-definition-cont
         (list (make-slime-xref :dspec `(,name)
                                :location location))
         &quot;dummy name&quot;
         where)))))

(when (boundp 'slime-edit-definition-hooks)
  (add-hook 'slime-edit-definition-hooks '40ants-doc-edit-locative-definition))
</code></pre><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/swank.lisp#L31">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FSWANK-3ALOCATE-DEFINITION-FOR-EMACS-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FSWANK-3ALOCATE-DEFINITION-FOR-EMACS-20FUNCTION-29>40ants-doc-full/swank:locate-definition-for-emacs</a></div><div class=object-args><span class=locative-args>name locative-string</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FSWANK-3ALOCATE-DEFINITION-FOR-EMACS-20FUNCTION-29></a></div></div><p>Note, there is also another part of Emacs code, related to
transcription blocks. It is described in <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Transcripts</code></a> section.</p><h2>Basics<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40BASICS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40BASICS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>Now let's examine the most important pieces in detail.</p><h3>Defining Sections<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DEFINING-SECTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DEFINING-SECTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L64">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc:defsection</a></div><div class=object-args><span class=locative-args>name (&amp;key (package &#39;\*package\*) (package-symbol nil) (readtable-symbol &#39;\*readtable\*) (section-class &#39;section) (export nil) title link-title-to (discard-documentation-p \*discard-documentation-p\*) (external-docs nil) (external-links nil) (ignore-words nil) (ignore-packages nil)) &amp;body entries</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>Define a documentation section and maybe export referenced symbols.
A bit behind the scenes, a global variable with <code>NAME</code> is defined and
is bound to a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>section</code></a> object. By convention, section names
start with the character <code>@</code>. See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TUTORIAL-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TUTORIAL-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Tutorial</code></a> for an example.</p><p><code>ENTRIES</code> consists of docstrings and references. Docstrings are
arbitrary strings in markdown format, references are defined in the
forms:</p><pre><code class="text">(symbol locative) or ((symbol1 symbol2 ... symboln) locative)
</code></pre><p>For example, <code>(FOO FUNCTION)</code> refers to the function <code>FOO</code>, <code>(@BAR
SECTION)</code> says that <code>@BAR</code> is a subsection of this
one. <code>(BAZ (METHOD () (T T T)))</code> refers to the default method of the
three argument generic function <code>BAZ</code>. <code>(FOO FUNCTION)</code> is
equivalent to <code>(FOO (FUNCTION))</code>.</p><p>A locative in a reference can either be a symbol or it can be a list
whose <code>CAR</code> is a symbol. In either case, the symbol is the called the
type of the locative while the rest of the elements are the locative
arguments. See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVE-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVE-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Locative Types</code></a> for the list of locative
types available out of the box.</p><p>The same symbol can occur multiple times in <code>ENTRIES</code>, typically
with different locatives, but this is not required.</p><p>The references are not looked up (see <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3ARESOLVE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3ARESOLVE-20FUNCTION-29"><code>40ants-doc/reference:resolve</code></a> in the
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EXTENSION-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EXTENSION-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Extension API</code></a>) until documentation is generated, so it is
allowed to refer to things yet to be defined.</p><p>If you set <code>:EXPORT</code> to true, the referenced symbols and <code>NAME</code> are
candidates for exporting. A candidate symbol is exported if</p><ul><li><p>it is accessible in <a href="https://40ants.com/doc/#x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>package</code></a> (it's not <code>OTHER-PACKAGE:SOMETHING</code>)
  and</p></li><li><p>there is a reference to it in the section being defined with a
  locative whose type is approved by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29"><code>exportable-locative-type-p</code></a>.</p></li></ul><p>The original idea with confounding documentation and exporting is to force
documentation of all exported symbols. However when forking <code>MGL-PAX</code> into
<a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> I've decided explicit imports make code more readable, and
changed the default for <code>:EXPORT</code> argument to <code>NIL</code> and added automatic
warnings to help find exported symbols not referenced from the documention.</p><p>If you decide to use <code>:EXPORT t</code> argument, note it will cause
<a href="http://www.sbcl.org/manual/#Package-Variance">package variance</a>
error on <code>SBCL</code>. To prevent it, use <code>UIOP:DEFINE-PACKAGE</code> instead
of <code>CL:DEFPACKAGE</code>. </p><p><code>:TITLE</code> is a non-marked-up string or <code>NIL</code>. If non-nil, it determines
the text of the heading in the generated output. <code>:LINK-TITLE-TO</code> is a
reference given as an
<code>(OBJECT LOCATIVE)</code> pair or <code>NIL</code>, to which the heading will link when
generating <code>HTML</code>. If not specified, the heading will link to its own
anchor.</p><p>When <code>:DISCARD-DOCUMENTATION-P</code> (defaults to <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3A-2ADISCARD-DOCUMENTATION-P-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3A-2ADISCARD-DOCUMENTATION-P-2A-20-28VARIABLE-29-29"><code>*discard-documentation-p*</code></a>)
is true, <code>ENTRIES</code> will not be recorded to save memory.</p><p><code>EXTERNAL-DOCS</code> argument can be a list of <code>URL</code>s leading to documentation
of other libraries. These libraries should be documented using <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a>
and you'll be able to mention symbols from them and have automatic
cross-links.</p><p><code>EXTERNAL-LINKS</code> argument could contain an alist of (&quot;name&quot; . &quot;<code>URL</code>&quot;) pairs.
These pairs will be tranformed to <code>name</code>: <code>URL</code> text and appended to each
markdown part of the defined chapter. This argument is useful when you are
having more than one text part in the chapter and want to reference same
<code>URL</code> from all of them using short markdown links.</p><p><code>:IGNORE-WORDS</code> allows to pass a list of strings which should not cause
warnings. Usually these are uppercased words which are not symbols
in the current package, like <code>SLIME</code>, <code>LISP</code>, etc.</p><p>Argument <code>IGNORE-PACKAGES</code> can be used to ignore mentions of all symbols from these
packages. If given, it should be a list of strings. Comparison of
package names is case-sensitive.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L269">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ADEFSECTION-COPY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-3ADEFSECTION-COPY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc:defsection-copy</a></div><div class=object-args><span class=locative-args>name section</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ADEFSECTION-COPY-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>When you use <a href="https://40ants.com/docs-builder">DOCS-BUILDER</a>, you might want
to define a @readme variable to make <code>README</code>.md file with the same content as
your main documentation. This case might be popular for libraries having
a short documentation.</p><p>To define @readme as a copy of the main doc, export @readme symbol and do this in the code:</p><pre><code class="lisp">(defparameter @readme (40ants-doc:copy-section @index))</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L31">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3A-2ADISCARD-DOCUMENTATION-P-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-3A-2ADISCARD-DOCUMENTATION-P-2A-20-28VARIABLE-29-29>40ants-doc:*discard-documentation-p*</a></div><div class=object-args><span class=locative-args>nil</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3A-2ADISCARD-DOCUMENTATION-P-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>The default value of <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a>'s <code>DISCARD-DOCUMENTATION-P</code> argument.
One may want to set <code>*DISCARD-DOCUMENTATION-P*</code> to true before
building a binary application.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L37">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3A-2ASYMBOLS-WITH-IGNORED-MISSING-LOCATIONS-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-3A-2ASYMBOLS-WITH-IGNORED-MISSING-LOCATIONS-2A-20-28VARIABLE-29-29>40ants-doc:*symbols-with-ignored-missing-locations*</a></div><div class=object-args><span class=locative-args>nil</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3A-2ASYMBOLS-WITH-IGNORED-MISSING-LOCATIONS-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>Sometimes code might be generated without source location attached.</p><p>For example Mito generates slot readers this way.
Such symbols should be added to this list to skip warnings during the documentation build.</p><p>Use such code to add a new symbol to ignore:</p><pre><code class="lisp">(eval-when (:compile-toplevel :load-toplevel :execute)
  (pushnew 'reblocks-auth/models:profile-user
           40ants-doc:*symbols-with-ignored-missing-locations*))</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/ignored-words.lisp#L23">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORED-WORDS-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORED-WORDS-20GENERIC-FUNCTION-29>40ants-doc/ignored-words:ignored-words</a></div><div class=object-args><span class=locative-args>obj</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORED-WORDS-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Returns a list of words or symbols to ignore in <code>OBJ</code>'s documentation.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/ignored-words.lisp#L15">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FIGNORED-WORDS-3ASUPPORTS-IGNORED-WORDS-P-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FIGNORED-WORDS-3ASUPPORTS-IGNORED-WORDS-P-20GENERIC-FUNCTION-29>40ants-doc/ignored-words:supports-ignored-words-p</a></div><div class=object-args><span class=locative-args>obj</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FIGNORED-WORDS-3ASUPPORTS-IGNORED-WORDS-P-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Should return <code>T</code> if objects implements a method for <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORED-WORDS-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORED-WORDS-20GENERIC-FUNCTION-29"><code>ignored-words</code></a> generic-function.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/ignored-words.lisp#L36">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORE-WORDS-IN-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORE-WORDS-IN-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc/ignored-words:ignore-words-in-package</a></div><div class=object-args><span class=locative-args>&amp;rest symbols-or-strings</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORE-WORDS-IN-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>Adds given symbols or string to ignore list bound to the current package.</p><p>You will not be warned when one of these symbols is not documented
or documented and not exported from the package.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/ignored-words.lisp#L29">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORE-IN-PACKAGE-20FUNCTION-29 id=x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORE-IN-PACKAGE-20FUNCTION-29>40ants-doc/ignored-words:ignore-in-package</a></div><div class=object-args><span class=locative-args>symbol-or-string &amp;key (package \*package\*)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FIGNORED-WORDS-3AIGNORE-IN-PACKAGE-20FUNCTION-29></a></div><div class=bullet-content><p>Adds <code>SYMBOL-OR-STRING</code> to the list of symbols ignored in the given <code>PACKAGE</code>.</p></div></div><h3>Cross-referencing<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40CROSS-REFERENCING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40CROSS-REFERENCING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>You can cross-reference entries from different documentation parts be it
content of the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> or a documentation string of some lisp entity.</p><p>The simples form of cross reference is uppercased name of the entity, like:
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AMAKE-REFERENCE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AMAKE-REFERENCE-20FUNCTION-29"><code>40ants-doc/reference:make-reference</code></a>. But if there are more than one locative
bound to the name, then all these links will be rendered in a parenthesis.
For example, docstring:</p><pre><code class="text">See 40ANTS-DOC/SOURCE-API:FIND-SOURCE.</code></pre><p>will be rendered as &quot;See <code>40ants-doc/source-api:find-source</code> (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29"><code>1</code></a> <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29"><code>2</code></a>).&quot; because
there is a generic-function and a method called <code>find-source</code> (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29"><code>1</code></a> <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29"><code>2</code></a>).</p><p>But you can mention a locative type in a docstring before or after a symbol name:</p><pre><code class="text">See 40ANTS-DOC/SOURCE-API:FIND-SOURCE generic-function.</code></pre><p>and it will be rendered as: See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29"><code>40ants-doc/source-api:find-source</code></a> generic-function.</p><p>In case if you don't want locative type to appear in the resulting documentation
or if locative type is complex, then you can use in a docstring markdown reference:</p><pre><code class="text">See [40ANTS-DOC/SOURCE-API:FIND-SOURCE][(method () (40ants-doc/reference:reference))].</code></pre><p>and link will lead to the specified method: See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29"><code>40ants-doc/source-api:find-source</code></a>.</p><h3>Autodocumentation<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40AUTODOC-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40AUTODOC-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p><a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> system provides an additional subsystem and package <code>40ANTS-DOC/AUTODOC</code>.
This subsystem contains a macro <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defautodoc</code></a>, which is similar to
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a>, but generates a section filled with content of the given <code>ASDF</code> system.</p><p>This subsystem is not loaded by default because it brings a multiple additional dependencies:</p><ul><li><p>alexandria</p></li><li><p>cl-change-case</p></li><li><p>cl-ppcre</p></li><li><p>cl-unicode</p></li><li><p>closer-mop</p></li></ul><p>but I'm trying to keep dependencies of the core <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> system is minimal.</p><p>Use it if your don't care or your have docs in a separate <code>ASDF</code> sybsystem.</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/autodoc.lisp#L238">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc/autodoc:defautodoc</a></div><div class=object-args><span class=locative-args>name (&amp;key system (title &quot;api&quot;) (show-system-description-p nil) (readtable-symbol &#39;\*readtable\*) (section-class &#39;section) (external-docs nil) (external-links nil) (ignore-words nil) (ignore-packages nil) (ignore-symbol-p &#39;starts-with-percent-p))</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>Macro <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defautodoc</code></a> collects all packages of the <code>ASDF</code> system and analyzes all external symbols.
In resulting documentation symbols are grouped by packages and types.</p><p>Here is how you can define a section using <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FAUTODOC-3ADEFAUTODOC-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defautodoc</code></a>:</p><pre><code class="">(40ants/defautodoc @api (:system :cl-telegram-bot))</code></pre><p>This form will generate complete <code>API</code> reference for the <code>CL-TELEGRAM-BOT</code> system.</p><p>The most wonderful it that you can integrate this <code>@api</code> section with handwritten
documentation like this:</p><pre><code class="">(defsection @index (:title &quot;cl-telegram-bot - Telegram Bot API&quot;)
  (@installation section)
  (@quickstart section)
  (@api section))

When SHOW-SYSTEM-DESCRIPTION-P argument is not NIL, section will be started from the
description of the given ASDF system.

Argument IGNORE-PACKAGES can be used to exclude some packages from autogenerated docs.
This feature was added to not generate docs for symbols created automatically
by Telegram API spec in cl-telegram-bot, but might be useful for some other projects,
especially for ones which are using package-inferred ASDF system style. Warnings about
mentioning symbols from ignored packages are suppressed. Comparison of package names
is case-sensitive.</code></pre></div></div><h2>Generating Documentation<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40GENERATING-DOCUMENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40GENERATING-DOCUMENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>To make documentation builder work, you need to load <a href="https://40ants.com/doc/#x-28-23A-28-2815-29-20BASE-CHAR-20-2E-20-2240ants-doc-full-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2815-29-20BASE-CHAR-20-2E-20-2240ants-doc-full-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc-full</code></a> asdf system.</p><p>There are two core functions which render documentation to a string or files:</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/builder.lisp#L235">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-STRING-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-STRING-20FUNCTION-29>40ants-doc-full/builder:render-to-string</a></div><div class=object-args><span class=locative-args>object &amp;key (format :html) (source-uri-fn 40ants-doc/reference-api:\*source-uri-fn\*) (full-package-names t)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-STRING-20FUNCTION-29></a></div><div class=bullet-content><p>Renders given CommonDoc node into the string using specified format.
Supported formats are <code>:HTML</code> and <code>:MARKDOWN</code>.</p><p>This function is useful for debugging <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> itself.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/builder.lisp#L260">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29>40ants-doc-full/builder:render-to-files</a></div><div class=object-args><span class=locative-args>sections &amp;key (theme &#39;40ants-doc-full/themes/default:default-theme) (base-dir #p&quot;./&quot;) (base-url nil) (source-uri-fn 40ants-doc/reference-api:\*source-uri-fn\*) (warn-on-undocumented-packages 40ants-doc-full/commondoc/page::\*warn-on-undocumented-packages\*) (clean-urls 40ants-doc-full/rewrite::\*clean-urls\*) (downcase-uppercase-code 40ants-doc-full/builder/vars::\*downcase-uppercase-code\*) (format :html) highlight-languages highlight-theme (full-package-names t)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29></a></div><div class=bullet-content><p>Renders given sections or pages into a files on disk.</p><p>By default, it renders in to <code>HTML</code>, but you can specify <code>FORMAT</code> argument.
Supported formats are <code>:HTML</code> and <code>:MARKDOWN</code>.</p><p>Returns an absolute pathname to the output directory as the first value
and pathnames corresponding to each of given sections.</p><p>When <code>WARN-ON-UNDOCUMENTED-PACKAGES</code> is true, then builder will check if there
are other packages of the package-inferred system with external but
not documented symbols. Otherwise, external symbols are searched only
in packages with at least one documented entity.</p><p>If <code>CLEAN-URLS</code> is true, then builder rewrites filenames and urls to make
it possible to host files on site without showing .html files inside. Also,
you need to specify a <code>BASE-URL</code>, to make urls absolute if you are rendering
markdown files together with <code>HTML</code>.</p><p>If <code>DOWNCASE-UPPERCASE-CODE</code> is true, then all references to symbols will be
downcased.</p><p><code>THEME</code> argument should be a theme class name. By default it is
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29"><code>40ants-doc-full/themes/default:default-theme</code></a>. See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FDOCS-3A-3A-40DEFINING-A-THEME-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FDOCS-3A-3A-40DEFINING-A-THEME-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Defining a Custom Theme</code></a>
to learn how to define themes.</p><p><code>HIGHLIGHT-LANGUAGES</code> and <code>HIGHLIGHT-THEME</code> arguments allow to redefine theme's
settings for Highlight.js. Languages should be a list of strings where each
item is a language name, <a href="https://github.com/highlightjs/highlight.js/blob/main/SUPPORTED_LANGUAGES.md">supported by Highlight.js</a>. Theme should be a
name of a supported theme. You can preview different highlighting themes <a href="https://highlightjs.org/static/demo/">here</a></p><p>When <code>FULL-PACKAGE-NAMES</code> is true (default), then all symbols in documentation headers
are rendered in their fully qualified form. This helps a lot when you are documenting
a package inferred <code>ASDF</code> system.</p><p>When building <code>HTML</code> documentation, this function also renders and index file `references.json
with references to all documented entities. You can give a list of urls to such reference files
as <code>EXTERNAL-DOCS</code> argument of <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> macro if you want to reference entities from other libraries.</p></div></div><p>Besides <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-STRING-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-STRING-20FUNCTION-29"><code>render-to-string</code></a> and <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>render-to-files</code></a> a convenience function is provided
 to serve the common case of having an <code>ASDF</code> system with a readme and a directory for the
<code>HTML</code> documentation.</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/builder.lisp#L116">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29>40ants-doc-full/builder:update-asdf-system-docs</a></div><div class=object-args><span class=locative-args>SECTIONS-OR-PAGES ASDF-SYSTEM &amp;KEY (README-SECTIONS NIL) (CHANGELOG-SECTIONS NIL) (THEME &#39;40ANTS-DOC-FULL/THEMES/DEFAULT:DEFAULT-THEME) (WARN-ON-UNDOCUMENTED-PACKAGES 40ANTS-DOC-FULL/COMMONDOC/PAGE::\*WARN-ON-UNDOCUMENTED-PACKAGES\*) (BASE-URL NIL) (DOCS-DIR #P&quot;docs/&quot;) (CLEAN-URLS 40ANTS-DOC-FULL/REWRITE::\*CLEAN-URLS\*) (DOWNCASE-UPPERCASE-CODE 40ANTS-DOC-FULL/BUILDER/VARS::\*DOWNCASE-UPPERCASE-CODE\*) HIGHLIGHT-LANGUAGES HIGHLIGHT-THEME (FULL-PACKAGE-NAMES T)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29></a></div><div class=bullet-content><p>Generate pretty <code>HTML</code> documentation for a single <code>ASDF</code> system,
possibly linking to github. If you are migrating from <code>MGL-PAX</code>,
then note, this function replaces <code>UPDATE-ASDF-SYSTEM-HTML-DOCS</code>
and <code>UPDATE-ASDF-SYSTEM-README</code> while making it possible to generate
a crosslinks between <code>README</code>.md and <code>HTML</code> docs. The same way you
can generate a ChangeLog.md file using <code>:CHANGELOG-SECTIONS</code> argument.
See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FCHANGELOG-3A-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FCHANGELOG-3A-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Changelog Generation</code></a> section to learn about
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc/changelog:defchangelog</code></a> helper.</p><p>Both <code>:README-SECTIONS</code> and <code>:CHANGELOG-SECTIONS</code> arguments may be a single
item or a list.</p><p>See docs on <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>render-to-files</code></a> function to learn about meaning of
<code>BASE-DIR</code>, <code>BASE-URL</code>, <code>SOURCE-URI-FN</code>, <code>WARN-ON-UNDOCUMENTED-PACKAGES</code>, <code>CLEAN-URLS</code>,
<code>DOWNCASE-UPPERCASE-CODE</code>, <code>THEME</code>, <code>HIGHLIGHT-LANGUAGES</code> and <code>HIGHLIGHT-THEME</code> arguments.</p><p>Example usage:</p><pre><code class="lisp">(40ants-doc-full/builder:update-asdf-system-docs 40ants-doc-full/doc:@index
                                                 :40ants-doc
                                                 :readme-sections 40ants-doc-full/doc:@readme)</code></pre><p>This is just a shorthand to call <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>render-to-files</code></a> for <code>ASDF</code> system.</p><p>All sections, listed in <code>:README-SECTIONS</code> argment will be concantenated into the <code>README</code>.md.
Some symbols, referenced in the <code>:README-SECTIONS</code> but not documented there will be
linked to the <code>HTML</code> documentation. To make this work for a hosted static sites,
then provide <code>:BASE-URL</code> of the site, otherwise, links will be relative.</p><p>In <code>MGL-PAX</code> this function supported such parameters as <code>:UPDATE-CSS-P</code> and <code>:PAGES</code>,
but in <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> javascript and <code>CSS</code> files are updated automatically. See documentation
on <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>render-to-files</code></a> to learn how does page separation and other parameters work.</p><p>If you want a more generic wrapper for building documentation for your projects,
take a look at <a href="https://40ants.com/docs-builder/">DOCS-BUILDER</a>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/builder.lisp#L204">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FBUILDER-3AGET-CURRENT-ASDF-SYSTEM-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FBUILDER-3AGET-CURRENT-ASDF-SYSTEM-20FUNCTION-29>40ants-doc-full/builder:get-current-asdf-system</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FBUILDER-3AGET-CURRENT-ASDF-SYSTEM-20FUNCTION-29></a></div><div class=bullet-content><p>Returns an <code>ASDF</code> system currently documented by call to <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29"><code>update-asdf-system-docs</code></a>.</p><p>This function can be used by your extensions to do add some additional features
like github stripe &quot;Fork Me&quot;.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/builder.lisp#L420">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FBUILDER-3A-2ADOCUMENT-HTML-TOP-BLOCKS-OF-LINKS-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-FULL-2FBUILDER-3A-2ADOCUMENT-HTML-TOP-BLOCKS-OF-LINKS-2A-20-28VARIABLE-29-29>40ants-doc-full/builder:*document-html-top-blocks-of-links*</a></div><div class=object-args><span class=locative-args>nil</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FBUILDER-3A-2ADOCUMENT-HTML-TOP-BLOCKS-OF-LINKS-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>A list of blocks of links to be display on the sidebar on the left,
above the table of contents. A block is of the form
<code>(&amp;KEY TITLE ID LINKS)</code>, where <code>TITLE</code> will be displayed at the top of the block in a
<code>HTML</code> <code>div</code> with <code>id</code>, followed by the links. <code>LINKS</code> is a list
of <code>(URI LABEL)</code> elements.`</p><p><b>Is not supported yet.</b></p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/builder.lisp#L429">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FBUILDER-3A-2ADOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-FULL-2FBUILDER-3A-2ADOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS-2A-20-28VARIABLE-29-29>40ants-doc-full/builder:*document-html-bottom-blocks-of-links*</a></div><div class=object-args><span class=locative-args>nil</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FBUILDER-3A-2ADOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>Like <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3A-2ADOCUMENT-HTML-TOP-BLOCKS-OF-LINKS-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3A-2ADOCUMENT-HTML-TOP-BLOCKS-OF-LINKS-2A-20-28VARIABLE-29-29"><code>*document-html-top-blocks-of-links*</code></a>, only it is displayed
below the table of contents.</p><p><b>Is not supported yet.</b></p></div></div><h3>Multiple Formats<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40RENDERING-MULTIPLE-FORMATS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FBUILDER-3A-3A-40RENDERING-MULTIPLE-FORMATS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>With <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> you can render <code>HTML</code> and Markdown documentation simultaneously.
This way, you can cross-reference entities from the <code>README</code>.md or ChangeLog.md to <code>HTML</code> docs.</p><p>To render documents in multiple formats, you have to pass to function <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>render-to-files</code></a> not
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>40ants-doc:section</code></a> objects, but <code>PAGE</code> objects. Page object consists of one or more sections and additional
information such as document format. A section can belong to a multiple pages usually having different
formats. This allows you to include &quot;tutorial&quot; section into both <code>HTML</code> docs and <code>README</code>.</p><p>Here is an example of rendering the full documentation and a <code>README</code> with only introduction and tutorial:</p><pre><code class="lisp">(defsection @full-manual (:title &quot;Manual&quot;)
  (@introduction)
  (@tutorial)
  (@api)
  (@changelog))

(render-to-files
 (list @full-manual
       (40ants-doc-full/page:make-page (list @introduction
                                        @tutorial)
                                       :format :markdown
                                       :base-filename &quot;README&quot;)
       (40ants-doc-full/page:make-page @changelog
                                       :format :markdown
                                       :base-filename &quot;ChangeLog&quot;)))</code></pre><p>The same approach works with the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29"><code>update-asdf-system-docs</code></a> function.</p><h3>Changelog Generation<a class=header-link
     href=#x-2840ANTS-DOC-2FCHANGELOG-3A-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-2FCHANGELOG-3A-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/changelog.lisp#L77">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc/changelog:defchangelog</a></div><div class=object-args><span class=locative-args>(&amp;KEY (TITLE &quot;ChangeLog&quot;) IGNORE-WORDS EXTERNAL-DOCS EXTERNAL-LINKS) &amp;BODY VERSIONS</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>This macro might be used to define a ChangeLog in a structured way.
With <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defchangelog</code></a> you specify a body where each sublist starts with
a version number and the rest is it's description in the markdown
format. You can mention symbols from the rest of the documentation
and they will be cross-linked automatically if you are using
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29"><code>40ants-doc-full/builder:update-asdf-system-docs</code></a> function.</p><p>Here is an example:</p><pre><code class="lisp">(defchangelog ()
  (0.2.0
   &quot;- Feature B implemented.
    - Bug was fixed in function FOO.&quot;)
  
  (0.1.0
   &quot;- Project forked from [MGL-PAX](https://github.com/melisgl/mgl-pax).
    - Feature A implemented.&quot;))</code></pre></div></div><h3>Github Workflow<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FGITHUB-3A-3A-40GITHUB-WORKFLOW-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FGITHUB-3A-3A-40GITHUB-WORKFLOW-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>It is generally recommended to commit generated readmes (see
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29"><code>40ants-doc-full/builder:update-asdf-system-docs</code></a>) so that users have something to read
without reading the code and sites like github can display them.</p><p><code>HTML</code> documentation can also be committed, but there is an issue with
that: when linking to the sources (see <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29"><code>make-github-source-uri-fn</code></a>),
the commit id is in the link. This means that code changes need to
be committed first, then <code>HTML</code> documentation regenerated and
committed in a followup commit.</p><p>To serve static documentation, use <a href="https://pages.github.com/">gh-pages</a>.
You can use a separate branch <code>gh-pages</code>, or point GitHub Pages
to a <code>docs</code> folder inside the <code>main</code> branch.
Good description of this process is
<a href="http://sangsoonam.github.io/2019/02/08/using-git-worktree-to-deploy-github-pages.html">http://sangsoonam.github.io/2019/02/08/using-git-worktree-to-deploy-github-pages.html</a>.
Two commits needed still, but it is somewhat less painful.</p><p>This way the <code>HTML</code> documentation will be available at
<code>http://&lt;username&gt;.github.io/&lt;repo-name&gt;</code>. It is probably a good
idea to add section like the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LINKS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LINKS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Links</code></a> section to allow jumping
between the repository and the gh-pages site.</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/github.lisp#L59">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29>40ants-doc-full/github:make-github-source-uri-fn</a></div><div class=object-args><span class=locative-args>asdf-system &amp;key github-uri git-version</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29></a></div><div class=bullet-content><p>Return a function suitable as <code>:SOURCE-URI-FN</code> of
the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>40ants-doc-full/builder:render-to-files</code></a> function. The function looks the source
location of the reference passed to it, and if the location is
found, the path is made relative to the root directory of
<code>ASDF-SYSTEM</code> and finally an <code>URI</code> pointing to github is returned. The
<code>URI</code> looks like this:</p><pre><code class="text">https://github.com/melisgl/mgl-pax/blob/master/src/pax-early.lisp#L12
</code></pre><p>&quot;master&quot; in the above link comes from <code>GIT-VERSION</code>.</p><p>If <code>GIT-VERSION</code> is <code>NIL</code>, then an attempt is made to determine to
current commit id from the <code>.git</code> in the directory holding
<code>ASDF-SYSTEM</code>. If no <code>.git</code> directory is found, then no links to
github will be generated.</p><p>If <code>GITHUB-URI</code> argument is not given, function will try to
get <code>URL</code> from <code>ASDF</code> system's description. To make this work,
your system description should look like this:</p><pre><code class="lisp">(defsystem 40ants-doc
  ...
  :source-control (:git &quot;https://github.com/40ants/doc&quot;)
  ...))))</code></pre><p>A separate warning is signalled whenever source location lookup
fails or if the source location points to a directory not below the
directory of <code>ASDF-SYSTEM</code>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference-api.lisp#L17">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FREFERENCE-API-3A-2ASOURCE-URI-FN-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-2FREFERENCE-API-3A-2ASOURCE-URI-FN-2A-20-28VARIABLE-29-29>40ants-doc/reference-api:*source-uri-fn*</a></div><div class=object-args><span class=locative-args>nil</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FREFERENCE-API-3A-2ASOURCE-URI-FN-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>Set this to a function of one argument.</p><p>The argument of this function will be a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a>
object and the result should be a full <code>URL</code> leading to the web page where
referenced object can be viewed. Usually this is a GitHub's page.</p><p>When you are using <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3AUPDATE-ASDF-SYSTEM-DOCS-20FUNCTION-29"><code>40ants-doc-full/builder:update-asdf-system-docs</code></a>,
this variable will be automatically bound to the result of
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29"><code>40ants-doc-full/github:make-github-source-uri-fn</code></a> function call if
<code>ASDF</code> system has a <code>:SOURCE-CONTROL</code> slot.</p><p>See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FGITHUB-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29"><code>40ants-doc-full/github:make-github-source-uri-fn</code></a> for details.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference-api.lisp#L32">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FREFERENCE-API-3ASOURCE-URI-20FUNCTION-29 id=x-2840ANTS-DOC-2FREFERENCE-API-3ASOURCE-URI-20FUNCTION-29>40ants-doc/reference-api:source-uri</a></div><div class=object-args><span class=locative-args>reference</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FREFERENCE-API-3ASOURCE-URI-20FUNCTION-29></a></div><div class=bullet-content><p>Returns <code>URI</code> for the reference object
if <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-API-3A-2ASOURCE-URI-FN-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-API-3A-2ASOURCE-URI-FN-2A-20-28VARIABLE-29-29"><code>*source-uri-fn*</code></a> is bound to a function.</p></div></div><h3>PAX World<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FWORLD-3A-3A-40WORLD-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FWORLD-3A-3A-40WORLD-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p><code>MGL-PAX</code> supported a &quot;World&quot; which was a registry of documents, which can generate
cross-linked <code>HTML</code> documentation pages for all the registered
documents.</p><p>But I decided to drop this feature for now, because usually build libraries documentation
separately as part of their <code>CI</code> pipline.</p><p>If somebody want's cross referencing between different libraries, then instead
of building their docs simultaneously, I'd suggest to create an index of entities,
provided by libraries and to store them as a <code>JSON</code> file along with a library documentation.</p><p>This way it will be possible to enumerate such sources of cross references as usual <code>URL</code>s.</p><p>Such feature is not implemented in the <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> system yet, but probably it will be
useful for libraries built around the <a href="https://40ants.com/weblocks/">Weblocks</a>.
If you want to help and implement the feature, please, let me know.</p><h2>Markdown Support<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-SUPPORT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-SUPPORT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>The Markdown in docstrings is processed with the
<code>3BMD</code> library.</p><h3>Indentation<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-INDENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-INDENTATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>Docstrings can be indented in any of the usual styles.
<a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> normalizes indentation by converting:</p><pre><code class="">(defun foo ()
  &quot;This is
   indented
   differently&quot;)</code></pre><p>to</p><pre><code class="">(defun foo ()
  &quot;This is
indented
differently&quot;)</code></pre><p>Docstrings in sources are indented in various ways which can easily
mess up markdown. To handle the most common cases leave the first
line alone, but from the rest of the lines strip the longest run of
leading spaces that is common to all non-blank lines.&quot;</p><h3>Images<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>You can use markdown syntax for inserting images:</p><pre><code class="">![](images/demo.gif)</code></pre><p>This code will search image file in the current <code>ASDF</code> system directory.</p><p>But some times you may want to refer images from some other <code>ASDF</code> system.
This could be useful for dist storage optimization - if you main system changes frequently
but images are not, then it is better to keep images in a separate <code>ASDF</code> system and repository.</p><p>In this case you can give asdf system as a prefix to the image path:</p><pre><code class="">![](asdf:some-system:images/demo.gif)</code></pre><h3>Syntax highlighting<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-SYNTAX-HIGHLIGHTING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-SYNTAX-HIGHLIGHTING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>For syntax highlighting, github's <a href="https://help.github.com/articles/github-flavored-markdown#fenced-code-blocks">fenced code
blocks</a> markdown extension to mark up code
blocks with triple backticks is enabled so all you need to do is
write:</p><pre><code class="text">```elisp
(defun foo ())
```
</code></pre><p>to get syntactically marked up <code>HTML</code> output. The language tag, <code>elisp</code> in this example,
is optional and defaults to <code>commonlisp</code>.</p><p>Originally <code>MGL-PAX</code> used <a href="https://github.com/redline6561/colorize/">colorize</a> for the syntax
highlighting, but <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> uses <a href="https://highlightjs.org/">Highlight.js</a> which is able to
guess code block language if it is not specified. To minimize <code>HTML</code> document's
static size, Hightlight.js is configured to support only these languages:</p><ul><li><p>bash</p></li><li><p>css</p></li><li><p>json</p></li><li><p>yaml</p></li><li><p>plain-text</p></li><li><p>html</p></li><li><p>markdown</p></li><li><p>lisp</p></li></ul><p>There is a separate <a href="https://github.com/40ants/doc/blob/master/static/README.md#how-to-update-highlightjs">README</a> where you will find instructions on how to
support other languages.</p><p>Besides an automatic language detection, the other cool feature of Highlight.js
is it's support for different color themes. Here you can view all available themes:
<a href="https://highlightjs.org/static/demo/">https://highlightjs.org/static/demo/</a>.
There is no easy way to choose color theme yet, but probably this will be a nice
feature for <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a>.</p><h3>MathJax<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MATHJAX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MATHJAX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>Displaying pretty mathematics in TeX format is supported via
MathJax. It can be done inline with <code>$</code> like this:</p><pre><code class="text">$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$
</code></pre><p>which is diplayed as $\int_0^\infty e^{-x^2}
dx=\frac{\sqrt{\pi}}{2}$, or it can be delimited by <code>$$</code> like this:</p><pre><code class="text">$$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$$
</code></pre><p>to get: $$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$$</p><p>MathJax will leave code blocks (including those inline with
backticks) alone. Outside code blocks, escape <code>$</code> by prefixing it
with a backslash to scare MathJax off.</p><p>Escaping all those backslashes in TeX fragments embedded in Lisp
strings can be a pain. <a href="https://github.com/smithzvk/pythonic-string-reader">Pythonic String
Reader</a> can help
with that.</p><h2>Documentation Printer Variables<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DOCUMENTATION-PRINTER-VARIABLES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40DOCUMENTATION-PRINTER-VARIABLES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>Docstrings are assumed to be in markdown format and they are pretty
much copied verbatim to the documentation subject to a few knobs
described below.</p><p><b>Note, some of these variables might be not supported yet in this fork.</b></p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/builder/printer.lisp#L21">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FBUILDER-2FPRINTER-3A-2ADOCUMENT-UPPERCASE-IS-CODE-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-FULL-2FBUILDER-2FPRINTER-3A-2ADOCUMENT-UPPERCASE-IS-CODE-2A-20-28VARIABLE-29-29>40ants-doc-full/builder/printer:*document-uppercase-is-code*</a></div><div class=object-args><span class=locative-args>t</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FBUILDER-2FPRINTER-3A-2ADOCUMENT-UPPERCASE-IS-CODE-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>When true, words with at least three characters and no lowercase
characters naming an interned symbol are assumed to be code as if
they were marked up with backticks which is especially useful when
combined with <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FLINK-3A-2ADOCUMENT-LINK-CODE-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FLINK-3A-2ADOCUMENT-LINK-CODE-2A-20-28VARIABLE-29-29"><code>40ants-doc-full/link:*document-link-code*</code></a>. For example, this docstring:</p><pre><code class="text">&quot;`FOO` and FOO.&quot;
</code></pre><p>is equivalent to this:</p><pre><code class="text">&quot;`FOO` and `FOO`.&quot;
</code></pre><p>if <code>FOO</code> is an interned symbol.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/link.lisp#L12">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FLINK-3A-2ADOCUMENT-LINK-CODE-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-FULL-2FLINK-3A-2ADOCUMENT-LINK-CODE-2A-20-28VARIABLE-29-29>40ants-doc-full/link:*document-link-code*</a></div><div class=object-args><span class=locative-args>t</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FLINK-3A-2ADOCUMENT-LINK-CODE-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>When true, during the process of generating documentation for a
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>40ants-doc:section</code></a> class, <code>HTML</code> anchors are added before the documentation of
every reference that's not to a section. Also, markdown style
reference links are added when a piece of inline code found in a
docstring refers to a symbol that's referenced by one of the
sections being documented. Assuming <code>BAR</code> is defined, the
documentation for:</p><pre><code class="lisp">(defsection @foo
  (foo function)
  (bar function))

(defun foo (x)
  &quot;Calls `BAR` on `X`.&quot;
  (bar x))</code></pre><p>would look like this:</p><pre><code class="text">- [function] FOO X

    Calls [`BAR`][1] on `X`.
</code></pre><p>Instead of <code>BAR</code>, one can write <code>[bar][]</code> or <code>[`bar`][]</code> as well.
Since symbol names are parsed according to <code>READTABLE-CASE</code>, character
case rarely matters.</p><p>Now, if <code>BAR</code> has references with different locatives:</p><pre><code class="lisp">(defsection @foo
  (foo function)
  (bar function)
  (bar type))

(defun foo (x)
  &quot;Calls `BAR` on `X`.&quot;
  (bar x))</code></pre><p>then documentation would link to all interpretations:</p><pre><code class="text">- [function] FOO X

    Calls `BAR`([`1`][link-id-1] [`2`][link-id-2]) on `X`.
</code></pre><p>This situation occurs with <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>40ants-doc:section</code></a> which is both a class (see
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>40ants-doc:section</code></a> class) and a locative type denoted by a symbol (see
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-3ASECTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-3ASECTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>40ants-doc/locatives:section</code></a> locative). Back in the example above, clearly,
there is no reason to link to type <code>BAR</code>, so one may wish to select
the function locative. There are two ways to do that. One is to
specify the locative explicitly as the id of a reference link:</p><pre><code class="text">&quot;Calls [BAR][function] on X.&quot;
</code></pre><p>However, if in the text there is a locative immediately before or
after the symbol, then that locative is used to narrow down the
range of possibilities. This is similar to what the <code>M-.</code> extension
does. In a nutshell, if <code>M-.</code> works without questions then the
documentation will contain a single link. So this also works without
any markup:</p><pre><code class="text">&quot;Calls function `BAR` on X.&quot;
</code></pre><p>This last option needs backticks around the locative if it's not a
single symbol.</p><p>Note that <code>*DOCUMENT-LINK-CODE*</code> can be combined with
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-2FPRINTER-3A-2ADOCUMENT-UPPERCASE-IS-CODE-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-2FPRINTER-3A-2ADOCUMENT-UPPERCASE-IS-CODE-2A-20-28VARIABLE-29-29"><code>40ants-doc-full/builder/printer:*document-uppercase-is-code*</code></a> to have links generated for
uppercase names with no quoting required.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/builder/vars.lisp#L7">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FBUILDER-2FVARS-3A-2ADOCUMENT-MAX-NUMBERING-LEVEL-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-FULL-2FBUILDER-2FVARS-3A-2ADOCUMENT-MAX-NUMBERING-LEVEL-2A-20-28VARIABLE-29-29>40ants-doc-full/builder/vars:*document-max-numbering-level*</a></div><div class=object-args><span class=locative-args>3</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FBUILDER-2FVARS-3A-2ADOCUMENT-MAX-NUMBERING-LEVEL-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>A non-negative integer. In their hierarchy, sections on levels less
than this value get numbered in the format of <code>3.1.2</code>. Setting it to
0 turns numbering off.</p><p><b>Is not supported yet.</b></p></div></div><h2>Locative Types<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVE-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVE-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>These are the locatives type supported out of the box. As all
locative types, they are symbols and their names should make it
obvious what kind of things they refer to. Unless otherwise noted,
locatives take no arguments.</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives.lisp#L1">package</a><div class=reference-object><div class=object-name><a href=#x-28-23A-28-2820-29-20BASE-CHAR-20-2E-20-2240ANTS-DOC-2FLOCATIVES-22-29-20PACKAGE-29 id=x-28-23A-28-2820-29-20BASE-CHAR-20-2E-20-2240ANTS-DOC-2FLOCATIVES-22-29-20PACKAGE-29>40ants-doc/locatives</a></div></div><a class=bullet-link href=#x-28-23A-28-2820-29-20BASE-CHAR-20-2E-20-2240ANTS-DOC-2FLOCATIVES-22-29-20PACKAGE-29></a></div><div class=bullet-content><p>This package holds all symbols denoting <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> locatives.</p><p>It serves for a forward declaration of supported locatives.
To build documentation you'll need to load the <a href="https://40ants.com/doc/#x-28-23A-28-2815-29-20BASE-CHAR-20-2E-20-2240ants-doc-full-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2815-29-20BASE-CHAR-20-2E-20-2240ants-doc-full-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc-full</code></a> system
which includes methods supporting these locatives.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/asdf-system.lisp#L26">locative</a><div class=reference-object><div class=object-name><a href=#x-28ASDF-2FSYSTEM-3ASYSTEM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28ASDF-2FSYSTEM-3ASYSTEM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>asdf/system:system</a></div></div><a class=bullet-link href=#x-28ASDF-2FSYSTEM-3ASYSTEM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Refers to an asdf system. The generated documentation will include
meta information extracted from the system definition. This also
serves as an example of a symbol that's not accessible in the
current package and consequently is not exported.</p><p>A title of the documentation section can be modified if you'll
define a method for <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FASDF-SYSTEM-3AASDF-SYSTEM-DOCUMENTATION-TITLE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FASDF-SYSTEM-3AASDF-SYSTEM-DOCUMENTATION-TITLE-20GENERIC-FUNCTION-29"><code>40ants-doc/locatives/asdf-system:asdf-system-documentation-title</code></a> generic-function.
Use <code>EQL</code> specifier for the method.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/asdf-system.lisp#L7">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FASDF-SYSTEM-3AASDF-SYSTEM-DOCUMENTATION-TITLE-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FASDF-SYSTEM-3AASDF-SYSTEM-DOCUMENTATION-TITLE-20GENERIC-FUNCTION-29>40ants-doc/locatives/asdf-system:asdf-system-documentation-title</a></div><div class=object-args><span class=locative-args>system</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FASDF-SYSTEM-3AASDF-SYSTEM-DOCUMENTATION-TITLE-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Returns a title for a section describing an <code>ASDF</code> system.</p><p>You might want to define a method using <code>EQL</code> specializer
to make a title shorter or to remove a system name from it.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/section.lisp#L21">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3ASECTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3ASECTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:section</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3ASECTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Refers to a section defined by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc:defsection</code></a>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/variable.lisp#L22">locative</a><div class=reference-object><div class=object-name><a href=#x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:variable</a></div><div class=object-args><span class=locative-args>&amp;optional initform</span></div></div><a class=bullet-link href=#x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Refers to a global special variable. <code>INITFORM</code>, or if not specified,
the global value of the variable is included in the documentation.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/constant.lisp#L22">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3ACONSTANT-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3ACONSTANT-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:constant</a></div><div class=object-args><span class=locative-args>&amp;optional initform</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3ACONSTANT-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Refers to a <code>DEFCONSTANT</code>. <code>INITFORM</code>, or if not specified,
the value of the constant is included in the documentation.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/macro.lisp#L23">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3AMACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3AMACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:macro</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3AMACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/compiler-macro.lisp#L22">locative</a><div class=reference-object><div class=object-name><a href=#x-28COMPILER-MACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28COMPILER-MACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:compiler-macro</a></div></div><a class=bullet-link href=#x-28COMPILER-MACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/symbol-macro.lisp#L23">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3ASYMBOL-MACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3ASYMBOL-MACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:symbol-macro</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3ASYMBOL-MACRO-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/function.lisp#L19">locative</a><div class=reference-object><div class=object-name><a href=#x-28FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:function</a></div></div><a class=bullet-link href=#x-28FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Note that the arglist in the generated documentation depends on
the quality of <code>SWANK-BACKEND:ARGLIST</code>. It may be that default
values of optional and keyword arguments are missing.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/generic-function.lisp#L23">locative</a><div class=reference-object><div class=object-name><a href=#x-28GENERIC-FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28GENERIC-FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:generic-function</a></div></div><a class=bullet-link href=#x-28GENERIC-FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/method.lisp#L28">locative</a><div class=reference-object><div class=object-name><a href=#x-28METHOD-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28METHOD-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:method</a></div><div class=object-args><span class=locative-args>method-qualifiers method-specializers</span></div></div><a class=bullet-link href=#x-28METHOD-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>See <code>CL:FIND-METHOD</code> for the description of the arguments.
To refer to the default method of the three argument generic
function <code>FOO</code>:</p><pre><code class="text">(foo (method () (t t t)))</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/slots.lisp#L30">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3AACCESSOR-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3AACCESSOR-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:accessor</a></div><div class=object-args><span class=locative-args>class-name</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3AACCESSOR-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>To refer to an accessor named <code>FOO-SLOT</code> of class
<code>FOO</code>:</p><pre><code class="text">(foo-slot (accessor foo))</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/slots.lisp#L36">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3AREADER-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3AREADER-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:reader</a></div><div class=object-args><span class=locative-args>class-name</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3AREADER-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>To refer to a reader named <code>FOO-SLOT</code> of class
<code>FOO</code>:</p><pre><code class="text">(foo-slot (reader foo))</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/slots.lisp#L42">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3AWRITER-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3AWRITER-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:writer</a></div><div class=object-args><span class=locative-args>class-name</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3AWRITER-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>To refer to a writer named <code>FOO-SLOT</code> of class
<code>FOO</code>:</p><pre><code class="text">(foo-slot (writer foo))</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/structure-accessor.lisp#L24">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3ASTRUCTURE-ACCESSOR-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3ASTRUCTURE-ACCESSOR-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:structure-accessor</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3ASTRUCTURE-ACCESSOR-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>This is a synonym of <a href="https://40ants.com/doc/#x-28FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28FUNCTION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>function</code></a> with the difference that the often
ugly and certainly uninformative lambda list will not be printed.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/class.lisp#L18">locative</a><div class=reference-object><div class=object-name><a href=#x-28CLASS-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28CLASS-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:class</a></div></div><a class=bullet-link href=#x-28CLASS-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/class.lisp#L20">locative</a><div class=reference-object><div class=object-name><a href=#x-28CONDITION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28CONDITION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:condition</a></div></div><a class=bullet-link href=#x-28CONDITION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/type.lisp#L18">locative</a><div class=reference-object><div class=object-name><a href=#x-28TYPE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28TYPE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:type</a></div></div><a class=bullet-link href=#x-28TYPE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p><a href="https://40ants.com/doc/#x-28TYPE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28TYPE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>type</code></a> can refer to classes as well, but it's better style to use the
more specific <a href="https://40ants.com/doc/#x-28CLASS-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28CLASS-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>class</code></a> locative type for that. Another difference to
<a href="https://40ants.com/doc/#x-28CLASS-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28CLASS-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>class</code></a> is that an attempt is made at printing the arguments of type
specifiers.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/package.lisp#L20">locative</a><div class=reference-object><div class=object-name><a href=#x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:package</a></div></div><a class=bullet-link href=#x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/dislocated.lisp#L12">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3ADISLOCATED-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3ADISLOCATED-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:dislocated</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3ADISLOCATED-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Refers to a symbol in a non-specific context. Useful for preventing
autolinking. For example, if there is a function called <code>FOO</code> then</p><pre><code class="text">`FOO`
</code></pre><p>will be linked to (if <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FLINK-3A-2ADOCUMENT-LINK-CODE-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FLINK-3A-2ADOCUMENT-LINK-CODE-2A-20-28VARIABLE-29-29"><code>40ants-doc-full/link:*document-link-code*</code></a>) its definition. However,</p><pre><code class="text">[`FOO`][dislocated]
</code></pre><p>will not be. On a dislocated locative function <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29"><code>40ants-doc/locatives/base:locate</code></a> always fails with a
<code>40ants-doc/locatives/base:locate-error</code> (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29"><code>1</code></a> <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29"><code>2</code></a>) condition.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/argument.lisp#L17">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3AARGUMENT-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3AARGUMENT-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:argument</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3AARGUMENT-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>An alias for <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-3ADISLOCATED-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-3ADISLOCATED-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>40ants-doc/locatives:dislocated</code></a>, so the one can refer to an argument of a
macro without accidentally linking to a class that has the same name
as that argument. In the following example, <code>FORMAT</code> may link to
<code>CL:FORMAT</code> (if we generated documentation for it):</p><pre><code class="">&quot;See the FORMAT in DOCUMENT.&quot;</code></pre><p>Since <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-3AARGUMENT-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-3AARGUMENT-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>argument</code></a> is a locative, we can prevent that linking by writing:</p><pre><code class="">&quot;See the FORMAT argument of DOCUMENT.&quot;</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/locative.lisp#L24">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:locative</a></div><div class=object-args><span class=locative-args>lambda-list</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>This is the locative for locatives. When <code>M-.</code> is pressed on
<a href="https://40ants.com/doc/#x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>variable</code></a> in <code>(VARIABLE LOCATIVE)</code>, this is what makes it possible
to land at the <code>(40ANTS-DOC/LOCATIVES/BASE:DEFINE-LOCATIVE-TYPE VARIABLE ...)</code> form.
Similarly, <code>(LOCATIVE LOCATIVE)</code> leads to this very definition.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/include.lisp#L25">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3AINCLUDE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3AINCLUDE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:include</a></div><div class=object-args><span class=locative-args>source &amp;key lang</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3AINCLUDE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Refers to a region of a file. <code>SOURCE</code> can be a string or a
pathname in which case the whole file is being pointed to or it can
explicitly supply <code>START</code>, <code>END</code> locatives. <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-3AINCLUDE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-3AINCLUDE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>include</code></a> is typically used to
include non-lisp files in the documentation (say markdown or elisp
as in the next example) or regions of lisp source files. This can
reduce clutter and duplication.</p><pre><code class="lisp">(defsection example-section ()
  (pax.el (include #.(asdf:system-relative-pathname :40ants-doc &quot;elisp/pax.el&quot;)
                   :lang &quot;elisp&quot;))
  (foo-example (include (:start (foo function)
                         :end (end-of-foo-example variable))
                        :lang &quot;commonlisp&quot;)))

(defun foo (x)
  (1+ x))

;;; Since file regions are copied verbatim, comments survive.
(defmacro bar ())

;;; This comment is the last thing in FOO-EXAMPLE's
;;; documentation since we use the dummy END-OF-FOO-EXAMPLE
;;; variable to mark the end location.
(defvar end-of-foo-example)

;;; More irrelevant code follows.</code></pre><p>In the above example, pressing <code>M-.</code> on <code>pax.el</code> will open the
<code>src/pax.el</code> file and put the cursor on its first character. <code>M-.</code>
on <code>FOO-EXAMPLE</code> will go to the source location of the <code>(asdf:system
locative)</code> locative.</p><p>When documentation is generated, the entire <code>pax.el</code> file is
included in the markdown as a code block. The documentation of
<code>FOO-EXAMPLE</code> will be the region of the file from the source location
of the <code>START</code> locative (inclusive) to the source location of the <code>END</code>
locative (exclusive). <code>START</code> and <code>END</code> default to the beginning and end
of the file, respectively.</p><p>Note that the file of the source location of <code>:START</code> and <code>:END</code> must be
the same. If <code>SOURCE</code> is pathname designator, then it must be absolute
so that the locative is context independent.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/stdout-of.lisp#L18">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3ASTDOUT-OF-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3ASTDOUT-OF-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:stdout-of</a></div><div class=object-args><span class=locative-args>form &amp;key lang</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3ASTDOUT-OF-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Creates a block containing output of a given form.
Also, an optional <code>:LANG</code> argument may be specified.
This could be useful when you want to show the results
of some code's evaluation.</p><p>Here is an example of the usage:</p><pre><code class="lisp">(defsection @example ()
 (describe-output (stdout-of (format t &quot;Hello World!&quot;))))</code></pre><p>Resulting block, rendered to Markdown format will look like:</p><pre><code class="text">```markdown
Hello World!
```
</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/restart.lisp#L14">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FRESTART-3ADEFINE-RESTART-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-2FRESTART-3ADEFINE-RESTART-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc/restart:define-restart</a></div><div class=object-args><span class=locative-args>symbol lambda-list &amp;body docstring</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FRESTART-3ADEFINE-RESTART-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>A definer macro to hang the documentation of a restart on a
symbol.</p><pre><code class="">(define-restart my-ignore-error ()
  &quot;Available when MY-ERROR is signalled, MY-IGNORE-ERROR unsafely continues.&quot;)</code></pre><p>Note that while there is a <code>CL:RESTART</code> class, there is no
corresponding source location or docstring like for <a href="https://40ants.com/doc/#x-28CONDITION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28CONDITION-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>condition</code></a>s.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/restart.lisp#L14">locative</a><div class=reference-object><div class=object-name><a href=#x-28RESTART-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-28RESTART-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>common-lisp:restart</a></div></div><a class=bullet-link href=#x-28RESTART-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/glossary.lisp#L21">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FGLOSSARY-3ADEFINE-GLOSSARY-TERM-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-2FGLOSSARY-3ADEFINE-GLOSSARY-TERM-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc/glossary:define-glossary-term</a></div><div class=object-args><span class=locative-args>name (&amp;key title (discard-documentation-p 40ants-doc:\*discard-documentation-p\*)) docstring</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FGLOSSARY-3ADEFINE-GLOSSARY-TERM-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>Define a global variable with <code>NAME</code> and set it to a glossary term
object. A glossary term is just a symbol to hang a docstring on. It
is a bit like a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>40ants-doc:section</code></a> in that, when linked to, its <code>TITLE</code> will be
the link text instead of the name of the symbol. Unlike sections
though, glossary terms are not rendered with headings, but in the
more lightweight bullet + locative + name/title style.</p><p>When <code>DISCARD-DOCUMENTATION-P</code> (defaults to <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3A-2ADISCARD-DOCUMENTATION-P-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3A-2ADISCARD-DOCUMENTATION-P-2A-20-28VARIABLE-29-29"><code>40ants-doc:*discard-documentation-p*</code></a>)
is true, <code>DOCSTRING</code> will not be recorded to save memory.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/glossary.lisp#L23">locative</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-3AGLOSSARY-TERM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-3AGLOSSARY-TERM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29>40ants-doc/locatives:glossary-term</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-3AGLOSSARY-TERM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29></a></div><div class=bullet-content><p>Refers to a glossary term defined by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FGLOSSARY-3ADEFINE-GLOSSARY-TERM-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FGLOSSARY-3ADEFINE-GLOSSARY-TERM-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc/glossary:define-glossary-term</code></a>.</p></div></div><p>There is also a helper function to compare locatives:</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L151">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-EQUAL-20FUNCTION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-EQUAL-20FUNCTION-29>40ants-doc/locatives/base:locative-equal</a></div><div class=object-args><span class=locative-args>left right</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-EQUAL-20FUNCTION-29></a></div><div class=bullet-content><p>Compares two locatives.</p><p>Each locative may be a symbol or a locative with arugments in a list form.</p></div></div><h2>Extension API<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EXTENSION-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EXTENSION-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3>Defining a Custom Theme<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FDOCS-3A-3A-40DEFINING-A-THEME-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FTHEMES-2FDOCS-3A-3A-40DEFINING-A-THEME-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>Out of the box, <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> system supports three color themes:</p><ul><li><p><a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29"><code>40ants-doc-full/themes/default:default-theme</code></a></p></li><li><p><a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FLIGHT-3ALIGHT-THEME-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FLIGHT-3ALIGHT-THEME-20CLASS-29"><code>40ants-doc-full/themes/light:light-theme</code></a></p></li><li><p><a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FDARK-3ADARK-THEME-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FDARK-3ADARK-THEME-20CLASS-29"><code>40ants-doc-full/themes/dark:dark-theme</code></a></p></li></ul><p>You can pass these names as <code>THEME</code> argument to the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>40ants-doc-full/builder:render-to-files</code></a>
function. Or you can pass a contructed theme object instead of a symbolic class name.</p><p>And of cause, you can define your own theme!</p><p>Theme allows to control <code>HTML</code> page rendering, colors and code highlighting.</p><h4 id="changing-colors">Changing Colors</h4><p>The simplest way to customize theme is to redefine some colors using <code>CSS</code>.
Here is how to set orange page background:</p><pre><code class="lisp">(defclass my-theme (default-theme)
  ())

(defmethod 40ants-doc-full/themes/api:render-css ((theme my-theme))
  (concatenate
   'string
   (call-next-method)
  
   (lass:compile-and-write
    `(body
      :background orange))))</code></pre><p>Also you might want to redefine a color theme for code highlighter:</p><pre><code class="">(defmethod 40ants-doc-full/themes/api:highlight-theme ((theme my-theme))
  &quot;atom-one-light&quot;)</code></pre><p>Talking about code highlighting, you can also redefine a list of
languages to highlight:</p><pre><code class="lisp">(defmethod 40ants-doc-full/themes/api:highlight-languages ((theme my-theme))
  (list &quot;lisp&quot;
        &quot;python&quot;
        &quot;bash&quot;))</code></pre><h4 id="changing-page-layout">Changing Page Layout</h4><p>The main entry-point for page rendering is
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-20GENERIC-FUNCTION-29"><code>render-page</code></a> generic-function. It calls all other
rendering functions.</p><p>If you are inheriting your theme class from <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29"><code>40ants-doc-full/themes/default:default-theme</code></a>,
then rendering functions will be called in the following order:</p><p><img src="static/rendering.png" width=600></p><p>On this page stripes on the right demonstrate order in which different rendering functions will be called:</p><ul><li><p>green is <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-20GENERIC-FUNCTION-29"><code>render-page</code></a>;</p></li><li><p>blue is <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-HEADER-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-HEADER-20GENERIC-FUNCTION-29"><code>render-page-header</code></a>;</p></li><li><p>violet is <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-20GENERIC-FUNCTION-29"><code>render-sidebar</code></a></p></li><li><p>red is <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-HEADER-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-HEADER-20GENERIC-FUNCTION-29"><code>render-sidebar-header</code></a></p></li><li><p>yellow is <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-CONTENT-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-CONTENT-20GENERIC-FUNCTION-29"><code>render-sidebar-content</code></a>;</p></li><li><p>orange is <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-FOOTER-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-FOOTER-20GENERIC-FUNCTION-29"><code>render-sidebar-footer</code></a>;</p></li><li><p>salad green is <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-CONTENT-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-CONTENT-20GENERIC-FUNCTION-29"><code>render-content</code></a>;</p></li><li><p>pink is <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-FOOTER-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-FOOTER-20GENERIC-FUNCTION-29"><code>render-page-footer</code></a>.</p></li></ul><p>Some of these methods might call <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-TOC-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-TOC-20GENERIC-FUNCTION-29"><code>render-toc</code></a> and
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SEARCH-FORM-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SEARCH-FORM-20GENERIC-FUNCTION-29"><code>render-search-form</code></a> to display a table of content
and a table form. Also, you might want to redefine <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-HTML-HEAD-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-HTML-HEAD-20GENERIC-FUNCTION-29"><code>render-html-head</code></a> generic-function
to change html page metadata such as included stylesheets and js files, page title, etc.</p><p>If you want to introduce changes, it is better to inherit from existing theme class
and to define a few methods to change only needed properties. For example, here is
a <a href="https://github.com/40ants/40ants-doc-theme-40ants/blob/master/theme.lisp">theme I've made</a> for all <code>40A</code>nts projects. I've added header, footer and made colors match
the main site.</p><h4 id="available-themes">Available Themes</h4><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/default.lisp#L34">class</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29>40ants-doc-full/themes/default:default-theme</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FDEFAULT-3ADEFAULT-THEME-20CLASS-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/light.lisp#L13">class</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FLIGHT-3ALIGHT-THEME-20CLASS-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FLIGHT-3ALIGHT-THEME-20CLASS-29>40ants-doc-full/themes/light:light-theme</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FLIGHT-3ALIGHT-THEME-20CLASS-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/dark.lisp#L11">class</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FDARK-3ADARK-THEME-20CLASS-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FDARK-3ADARK-THEME-20CLASS-29>40ants-doc-full/themes/dark:dark-theme</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FDARK-3ADARK-THEME-20CLASS-29></a></div></div><h4 id="theme-definition-protocol">Theme Definition Protocol</h4><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L42">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AHIGHLIGHT-LANGUAGES-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AHIGHLIGHT-LANGUAGES-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:highlight-languages</a></div><div class=object-args><span class=locative-args>theme</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AHIGHLIGHT-LANGUAGES-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Returns a list of languages to highlight in snippets. Each language should be supported by Highlight.js.</p><p><b>Deprecated!</b> will be removed after 2024-11-13.
Pass languages and highlight theme as arguments to highlighjs plugin.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L51">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AHIGHLIGHT-THEME-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AHIGHLIGHT-THEME-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:highlight-theme</a></div><div class=object-args><span class=locative-args>theme</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AHIGHLIGHT-THEME-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Returns a string with the name of the Highlight.js color theme for highlighted snippets.</p><p>To preview themes, use this site: <a href="https://highlightjs.org/static/demo/">https://highlightjs.org/static/demo/</a></p><p><b>Deprecated!</b> Will be removed after 2024-11-13.
Pass languages and highlight theme as arguments to highlighjs plugin.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L72">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-CSS-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-CSS-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-css</a></div><div class=object-args><span class=locative-args>theme</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-CSS-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Returns a string with <code>CSS</code>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L75">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-page</a></div><div class=object-args><span class=locative-args>theme uri title &amp;key toc content</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders whole page using theme and callable <code>CONTENT-FUNC</code>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L114">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-HTML-HEAD-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-HTML-HEAD-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-html-head</a></div><div class=object-args><span class=locative-args>theme uri title</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-HTML-HEAD-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders content of the <code>HTML</code> <code>HEAD</code> tag.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L78">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-HEADER-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-HEADER-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-page-header</a></div><div class=object-args><span class=locative-args>theme uri title</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-HEADER-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders whole page header. Does nothing by default.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L111">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-FOOTER-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-FOOTER-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-page-footer</a></div><div class=object-args><span class=locative-args>theme uri</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-PAGE-FOOTER-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders whole page footer. Does nothing by default.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L117">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-CONTENT-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-CONTENT-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-content</a></div><div class=object-args><span class=locative-args>theme uri toc content-func</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-CONTENT-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders page's content. It can wrap content into <code>HTML</code> tags and should funcall <code>CONTENT-FUNC</code> without arguments.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L120">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-sidebar</a></div><div class=object-args><span class=locative-args>theme uri toc</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders page's sidebar</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L123">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-HEADER-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-HEADER-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-sidebar-header</a></div><div class=object-args><span class=locative-args>theme uri toc</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-HEADER-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders sidebar's header. Usually it contains a search input.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L126">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-FOOTER-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-FOOTER-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-sidebar-footer</a></div><div class=object-args><span class=locative-args>theme uri toc</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-FOOTER-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders sidebar's header. By default it contains a link to the <a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> system.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L129">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-CONTENT-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-CONTENT-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-sidebar-content</a></div><div class=object-args><span class=locative-args>theme uri toc</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SIDEBAR-CONTENT-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders sidebar's content. By default it calls <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-TOC-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-TOC-20GENERIC-FUNCTION-29"><code>render-toc</code></a> generic-function.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L132">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-TOC-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-TOC-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-toc</a></div><div class=object-args><span class=locative-args>theme uri toc</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-TOC-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders documentation <code>TOC</code>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L135">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SEARCH-FORM-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SEARCH-FORM-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:render-search-form</a></div><div class=object-args><span class=locative-args>theme uri toc</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ARENDER-SEARCH-FORM-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Renders a search form.</p></div></div><h4 id="plugins-api">Plugins API</h4><p><a href="https://40ants.com/doc/#x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29" data-document="https://40ants.com/doc/" data-node="x-28-23A-28-2810-29-20BASE-CHAR-20-2E-20-2240ants-doc-22-29-20ASDF-2FSYSTEM-3ASYSTEM-29"><code>40ants-doc</code></a> themes support plugins. Plugins are small objects holding some configuration parameters and able to
inject additional content into documentation pages or able to copy some static files to the results directory.</p><p>By default, only <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FPLUGINS-2FHIGHLIGHTJS-3AHIGHLIGHTJS-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FPLUGINS-2FHIGHLIGHTJS-3AHIGHLIGHTJS-20FUNCTION-29"><code>highlightjs</code></a> plugin is enabled, but you can pass a custom list of plugins when creating
a theme object. For example, here is how to can enable both Hightlight.js and MathJax plugins:</p><pre><code class="">(defsection @index (:title &quot;Example&quot;)
  &quot;MathJax example:

   1. $a ne 0$
   2. $x = {-b pm sqrt{b^2-4ac} over 2a}.$&quot;)

(40ants-doc-full/builder:render-to-files
 @index
 :base-dir &quot;/tmp/output/&quot;
 :theme (make-instance '40ants-doc-full/themes/light:light-theme
                       :plugins (list
                                 (highlightjs)
                                 (mathjax))))</code></pre><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L36">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ATHEME-PLUGINS-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ATHEME-PLUGINS-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:theme-plugins</a></div><div class=object-args><span class=locative-args>theme</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ATHEME-PLUGINS-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Returns a list of plugin objects which will be used to inject additional information into the pages.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L62">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ACOPY-STATIC-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ACOPY-STATIC-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:copy-static</a></div><div class=object-args><span class=locative-args>plugin target-dir</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3ACOPY-STATIC-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Define a method for this function if your plugin need to some static assets to work.</p><p><code>TARGET-DIR</code> argument is an absolute directory pathname pointing to the root of the site.</p><p>By default does nothing.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L81">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-INTO-PAGE-HEADER-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-INTO-PAGE-HEADER-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:inject-into-page-header</a></div><div class=object-args><span class=locative-args>plugin uri</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-INTO-PAGE-HEADER-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Plugins can define a method for this generic-function to add some code to the end of a page header.</p><p>Each method should return a string which will be inserted without &quot;escaping&quot; so
the plugin's responsibility to escape all user input's if necessary.</p><p>Does nothing by default.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L91">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-BEFORE-CONTENT-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-BEFORE-CONTENT-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:inject-before-content</a></div><div class=object-args><span class=locative-args>plugin uri</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-BEFORE-CONTENT-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Plugins can define a method for this generic-function to add some <code>HTML</code> before the main content of the page.</p><p>Each method should return a string which will be inserted without &quot;escaping&quot; so
the plugin's responsibility to escape all user input's if necessary.</p><p>Does nothing by default.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/themes/api.lisp#L101">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-AFTER-CONTENT-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-AFTER-CONTENT-20GENERIC-FUNCTION-29>40ants-doc-full/themes/api:inject-after-content</a></div><div class=object-args><span class=locative-args>plugin uri</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTHEMES-2FAPI-3AINJECT-AFTER-CONTENT-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Plugins can define a method for this generic-function to add some <code>HTML</code> after the main content of the page.</p><p>Each method should return a string which will be inserted without &quot;escaping&quot; so
the plugin's responsibility to escape all user input's if necessary.</p><p>Does nothing by default.</p></div></div><h4 id="built-in-plugins">Built-in Plugins</h4><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/plugins/highlightjs.lisp#L47">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FPLUGINS-2FHIGHLIGHTJS-3AHIGHLIGHTJS-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FPLUGINS-2FHIGHLIGHTJS-3AHIGHLIGHTJS-20FUNCTION-29>40ants-doc-full/plugins/highlightjs:highlightjs</a></div><div class=object-args><span class=locative-args>&amp;key (languages \*default-languages\*) (theme \*default-theme\*)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FPLUGINS-2FHIGHLIGHTJS-3AHIGHLIGHTJS-20FUNCTION-29></a></div><div class=bullet-content><p>Creates a Highlightjs plugin.</p><p>You can redefine languages list and color theme like this:</p><pre><code class="">(make-instance '40ants-doc-full/themes/light:light-theme
               :plugins (list
                         (highlightjs :theme &quot;magula&quot;
                                      :languages '(&quot;lisp&quot; &quot;python&quot;))))</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/plugins/mathjax.lisp#L16">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FPLUGINS-2FMATHJAX-3AMATHJAX-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FPLUGINS-2FMATHJAX-3AMATHJAX-20FUNCTION-29>40ants-doc-full/plugins/mathjax:mathjax</a></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FPLUGINS-2FMATHJAX-3AMATHJAX-20FUNCTION-29></a></div><div class=bullet-content><p>Creates a MathJax plugin.</p></div></div><h3>Locatives and References<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVES-AND-REFERENCES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40LOCATIVES-AND-REFERENCES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>While Common Lisp has rather good introspective abilities, not
everything is first class. For example, there is no object
representing the variable defined with <code>(DEFVAR
FOO)</code>. <code>(40ANTS-DOC/REFERENCE:MAKE-REFERENCE 'FOO 'VARIABLE)</code> constructs a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a> that
captures the path to take from an object (the symbol <code>FOO</code>) to an
entity of interest (for example, the documentation of the variable).
The path is called the locative. A locative can be applied to an
object like this:</p><pre><code class="">(locate 'foo 'variable)</code></pre><p>which will return the same reference as <code>(40ANTS-DOC/REFERENCE:MAKE-REFERENCE 'FOO
'VARIABLE)</code>. Operations need to know how to deal with references
which we will see in <code>40ants-doc/locatives/base:locate-and-find-source</code> (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20-28METHOD-20NIL-20-28T-20T-20T-29-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20-28METHOD-20NIL-20-28T-20T-20T-29-29-29"><code>1</code></a> <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29"><code>2</code></a>).</p><p>Naturally, <code>(40ANTS-DOC/LOCATIVES/BASE:LOCATE 'FOO 'FUNCTION)</code> will simply return <code>#'FOO</code>, no
need to muck with references when there is a perfectly good object.</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L86">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29>40ants-doc/locatives/base:locate</a></div><div class=object-args><span class=locative-args>object locative &amp;key (errorp t)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29></a></div><div class=bullet-content><p>Follow <code>LOCATIVE</code> from <code>OBJECT</code> and return the object it leads to or a
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a> if there is no first class object corresponding to the
location. If <code>ERRORP</code>, then a <code>locate-error</code> (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29"><code>1</code></a> <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29"><code>2</code></a>) condition is signaled when
the lookup fails.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L60">condition</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29>40ants-doc/locatives/base:locate-error</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29></a></div><div class=bullet-content><p>Signaled by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29"><code>locate</code></a> when the lookup fails and <code>ERRORP</code>
is true.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L60">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-MESSAGE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-MESSAGE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29>40ants-doc/locatives/base:locate-error-message</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:message)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-MESSAGE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L60">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-OBJECT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-OBJECT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29>40ants-doc/locatives/base:locate-error-object</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:object)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-OBJECT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L60">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-LOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-LOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29>40ants-doc/locatives/base:locate-error-locative</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:locative)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-LOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference.lisp#L156">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FREFERENCE-3ARESOLVE-20FUNCTION-29 id=x-2840ANTS-DOC-2FREFERENCE-3ARESOLVE-20FUNCTION-29>40ants-doc/reference:resolve</a></div><div class=object-args><span class=locative-args>reference &amp;key (errorp t)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FREFERENCE-3ARESOLVE-20FUNCTION-29></a></div><div class=bullet-content><p>A convenience function to <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29"><code>40ants-doc/locatives/base:locate</code></a> <code>REFERENCE</code>'s object with its
locative.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference.lisp#L18">class</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29 id=x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29>40ants-doc/reference:reference</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29></a></div><div class=bullet-content><p>A <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>reference</code></a> represents a path (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-LOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-LOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29"><code>reference-locative</code></a>)
to take from an object (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-OBJECT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-OBJECT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29"><code>reference-object</code></a>).</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference.lisp#L19">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-OBJECT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29 id=x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-OBJECT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29>40ants-doc/reference:reference-object</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:object)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-OBJECT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference.lisp#L20">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-LOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29 id=x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-LOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29>40ants-doc/reference:reference-locative</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:locative)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-LOCATIVE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference.lisp#L30">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FREFERENCE-3AMAKE-REFERENCE-20FUNCTION-29 id=x-2840ANTS-DOC-2FREFERENCE-3AMAKE-REFERENCE-20FUNCTION-29>40ants-doc/reference:make-reference</a></div><div class=object-args><span class=locative-args>object locative</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FREFERENCE-3AMAKE-REFERENCE-20FUNCTION-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L128">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-TYPE-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-TYPE-20GENERIC-FUNCTION-29>40ants-doc/locatives/base:locative-type</a></div><div class=object-args><span class=locative-args>locative</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-TYPE-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>The first element of <code>LOCATIVE</code> if it's a list. If it's a symbol then
it's that symbol itself. Typically, methods of generic functions
working with locatives take locative type and locative args as
separate arguments to allow methods have eql specializers on the
type symbol.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L142">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-ARGS-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-ARGS-20GENERIC-FUNCTION-29>40ants-doc/locatives/base:locative-args</a></div><div class=object-args><span class=locative-args>locative</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-ARGS-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>The <code>REST</code> of <code>LOCATIVE</code> if it's a list. If it's a symbol then
it's ().</p></div></div><h3>Adding New Object Types<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40NEW-OBJECT-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40NEW-OBJECT-TYPES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>If you wish to make it possible to render documentation for a new
object type, then you have to define a method for the
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29"><code>40ants-doc-full/commondoc/builder:to-commondoc</code></a> generic function.
And to make <code>M-.</code> navigation work with new object types, a methods of
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29"><code>40ants-doc/locatives/base:locate-object</code></a> generic-function and
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29"><code>40ants-doc/source-api:find-source</code></a> generic-function are to be defined.
Also, additional method for <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-API-3ACANONICAL-REFERENCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-API-3ACANONICAL-REFERENCE-20GENERIC-FUNCTION-29"><code>40ants-doc/reference-api:canonical-reference</code></a> generic-function
need to be defined to make an opposite to <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29"><code>40ants-doc/locatives/base:locate-object</code></a>'s action.</p><p>Finally, <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29"><code>40ants-doc:exportable-locative-type-p</code></a> generic-function
may be overridden if exporting does not makes sense.
Here is a stripped down example of how all this is done
for <a href="https://40ants.com/doc/#x-28ASDF-2FSYSTEM-3ASYSTEM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28ASDF-2FSYSTEM-3ASYSTEM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>asdf:system</code></a>:</p><pre><code class="commonlisp">(define-locative-type asdf:system ()
  &quot;Refers to an asdf system. The generated documentation will include
  meta information extracted from the system definition. This also
  serves as an example of a symbol that's not accessible in the
  current package and consequently is not exported.

  A title of the documentation section can be modified if you'll
  define a method for 40ANTS-DOC/LOCATIVES/ASDF-SYSTEM:ASDF-SYSTEM-DOCUMENTATION-TITLE generic-function.
  Use EQL specifier for the method.&quot;)


(defun find-system (name)
  &quot;ASDF:FIND-SYSTEM is 1000 times slower than ASDF:REGISTERED-SYSTEM,
   but REGISTERED-SYSTEM sometimes unable to find a system (for example
   when this is a primary ASDF system, but it's defpackage defines
   package with the name of primary system and a nickname equal to the
   subsystem name. See log4cl-extras/core as example).

   This we first try to use fast method and fallback to the slow one.&quot;
  (or (asdf:registered-system name)
      (asdf:find-system name)))


(defmethod locate-object (symbol (locative-type (eql 'asdf:system))
                          locative-args)
  (assert (endp locative-args))
  ;; FIXME: This is slow as hell.
  ;; TODO: check if replacement of find-system with registered-system helped
  (or (find-system symbol)
      (locate-error)))

(defmethod canonical-reference ((system asdf:system))
  (40ants-doc/reference:make-reference (asdf:primary-system-name system)
                                       'asdf:system))

(defmethod find-source ((system asdf:system))
  `(:location
    (:file ,(namestring (asdf/system:system-source-file system)))
    (:position 1)
    (:snippet &quot;&quot;)))

(defmethod to-commondoc ((system asdf:system))
  (let ((title (asdf-system-documentation-title system)))
    (flet ((item (name getter &amp;key type)
             (let* ((value (funcall getter system))
                    (href nil))
               (when value
                 (case type
                   (:link (setf href value))
                   (:mailto (setf href (format nil &quot;mailto:~A&quot;
                                               value)))
                   (:source-control (psetf value (format nil &quot;~A&quot;
                                                         (first value))
                                           href (second value))))
                 (make-list-item
                  (make-paragraph
                   (cond
                     ((eql type :asdf-systems)
                      (make-content
                       (list*
                        (make-text
                         (format nil &quot;~A: &quot;
                                 name))
                        (loop with first = t
                              for system-name in value
                              if first
                                do (setf first nil)
                              else
                                collect (make-text &quot;, &quot;)
                              collect (make-web-link (format nil &quot;https://quickdocs.org/~A&quot;
                                                             system-name)
                                                     (make-text system-name))))))
                     (href
                      (make-content
                       (list (make-text
                              (format nil &quot;~A: &quot;
                                      name))
                             (make-web-link href
                                            (make-text value)))))
                     (t
                      (make-text
                       (format nil &quot;~A: ~A&quot;
                               name
                               value))))))))))
      
      (let* ((items (list (item &quot;Version&quot; 'asdf/component:component-version)
                          (item &quot;Description&quot; 'asdf/system:system-description)
                          (item &quot;Licence&quot; 'asdf/system:system-licence)
                          (item &quot;Author&quot; 'asdf/system:system-author)
                          (item &quot;Maintainer&quot; 'asdf/system:system-maintainer)
                          (item &quot;Mailto&quot; 'asdf/system:system-mailto
                                :type :mailto)
                          (item &quot;Homepage&quot; 'asdf/system:system-homepage
                                :type :link)
                          (item &quot;Bug tracker&quot; 'asdf/system:system-bug-tracker
                                :type :link)
                          (item &quot;Source control&quot; 'asdf/system:system-source-control
                                :type :source-control)
                          (item &quot;Depends on&quot; 'asdf-system-dependencies
                                :type :asdf-systems)))
             (children (make-unordered-list
                        (remove nil items)))
             (reference (40ants-doc/reference-api:canonical-reference system)))
        (make-section-with-reference title
                                     children
                                     reference)))))

</code></pre><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L23">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ADEFINE-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ADEFINE-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc/locatives/base:define-locative-type</a></div><div class=object-args><span class=locative-args>locative-type lambda-list &amp;body docstring</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ADEFINE-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>Declare <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-TYPE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-TYPE-20GENERIC-FUNCTION-29"><code>locative-type</code></a> as a locative. One gets two
things in return: first, a place to document the format and
semantics of <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-TYPE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATIVE-TYPE-20GENERIC-FUNCTION-29"><code>locative-type</code></a> (in <code>LAMBDA-LIST</code> and <code>DOCSTRING</code>); second,
being able to reference <code>(LOCATIVE-TYPE LOCATIVE)</code>. For example, if
you have:</p><pre><code class="lisp">(define-locative-type variable (&amp;optional initform)
  &quot;Dummy docstring.&quot;)</code></pre><p>then <code>(VARIABLE LOCATIVE)</code> refers to this form.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L398">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29>40ants-doc:exportable-locative-type-p</a></div><div class=object-args><span class=locative-args>locative-type</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Return true if symbols in references with
<code>LOCATIVE-TYPE</code> are to be exported when they occur in a
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> having <code>:EXPORT t</code> argument. The default method returns T, while the methods for
<a href="https://40ants.com/doc/#x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>package</code></a>, <a href="https://40ants.com/doc/#x-28ASDF-2FSYSTEM-3ASYSTEM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28ASDF-2FSYSTEM-3ASYSTEM-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>asdf:system</code></a> and <a href="https://40ants.com/doc/#x-28METHOD-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28METHOD-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>method</code></a> return <code>NIL</code>.</p><p><a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> calls this function to decide what symbols to export when
its <code>EXPORT</code> argument is true.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L49">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29>40ants-doc/locatives/base:locate-object</a></div><div class=object-args><span class=locative-args>object locative-type locative-args</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Return the object, to which <code>OBJECT</code> and the locative
refer. For example, if <code>LOCATIVE-TYPE</code> is the symbol <a href="https://40ants.com/doc/#x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>package</code></a>, this
returns <code>(FIND-PACKAGE SYMBOL)</code>. Signal a <code>locate-error</code> (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29"><code>1</code></a> <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29"><code>2</code></a>) condition by
calling the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29"><code>locate-error</code></a> function if the lookup fails. Signal other
errors if the types of the argument are bad, for instance
<code>LOCATIVE-ARGS</code> is not the empty list in the package example. If a
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a> is returned then it must be canonical in the sense that
calling <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-API-3ACANONICAL-REFERENCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-API-3ACANONICAL-REFERENCE-20GENERIC-FUNCTION-29"><code>40ants-doc/reference-api:canonical-reference</code></a> on it will return the same reference.
For extension only, don't call this directly.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/object-package.lisp#L7">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FOBJECT-PACKAGE-3AOBJECT-PACKAGE-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FOBJECT-PACKAGE-3AOBJECT-PACKAGE-20GENERIC-FUNCTION-29>40ants-doc/object-package:object-package</a></div><div class=object-args><span class=locative-args>object</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FOBJECT-PACKAGE-3AOBJECT-PACKAGE-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Should return a package object where locative object was defined.</p><p>This package will be bound to <code>*PACKAGE*</code> when processing the documentation piece
using <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29"><code>40ants-doc-full/commondoc/builder:to-commondoc</code></a> generic-function.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L72">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29>40ants-doc/locatives/base:locate-error</a></div><div class=object-args><span class=locative-args>&amp;rest format-and-args</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29></a></div><div class=bullet-content><p>Call this function to signal a <code>locate-error</code> (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20FUNCTION-29"><code>1</code></a> <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-20CONDITION-29"><code>2</code></a>) condition from a
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29"><code>locate-object</code></a> generic-function. <code>FORMAT-AND-ARGS</code> contains a format string and
args suitable for <code>FORMAT</code> from which the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-MESSAGE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-MESSAGE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-ERROR-29-29"><code>locate-error-message</code></a> is
constructed. If <code>FORMAT-AND-ARGS</code> is <code>NIL</code>, then the message will be <code>NIL</code>
too.</p><p>The object and the locative are not specified, they are added by
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29"><code>locate</code></a> when it resignals the condition.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference-api.lisp#L10">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FREFERENCE-API-3ACANONICAL-REFERENCE-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FREFERENCE-API-3ACANONICAL-REFERENCE-20GENERIC-FUNCTION-29>40ants-doc/reference-api:canonical-reference</a></div><div class=object-args><span class=locative-args>object</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FREFERENCE-API-3ACANONICAL-REFERENCE-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Return a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a> that resolves to <code>OBJECT</code>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/source-api.lisp#L12">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29>40ants-doc/source-api:find-source</a></div><div class=object-args><span class=locative-args>object</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Like <code>SWANK:FIND-DEFINITION-FOR-THING</code>, but this
one is a generic function to be extensible. In fact, the default
implementation simply defers to <code>SWANK:FIND-DEFINITION-FOR-THING</code>.
This function is called by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FSWANK-3ALOCATE-DEFINITION-FOR-EMACS-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FSWANK-3ALOCATE-DEFINITION-FOR-EMACS-20FUNCTION-29"><code>40ants-doc-full/swank:locate-definition-for-emacs</code></a> which lies
behind the <code>M-.</code> extension (see <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Emacs Integration</code></a>).</p><p>If successful, the return value looks like this:</p><pre><code class="lisp">(:location (:file &quot;/home/mega/own/mgl/pax/test/test.lisp&quot;)
           (:position 24) nil)</code></pre><p>The <code>NIL</code> is the source snippet which is optional. Note that position
1 is the first character. If unsuccessful, the return values is
like:</p><pre><code class="lisp">(:error &quot;Unknown source location for SOMETHING&quot;)</code></pre></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/builder.lisp#L13">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29>40ants-doc-full/commondoc/builder:to-commondoc</a></div><div class=object-args><span class=locative-args>obj</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Define methods for this generic function to render object's
documentation into an intermediate CommonDoc format.</p><p>Function should return a <code>COMMON-DOC:DOCUMENT-NODE</code>.</p><p>To show a standard documentation item with locative,
name and arguments, use <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBULLET-3AMAKE-BULLET-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBULLET-3AMAKE-BULLET-20FUNCTION-29"><code>40ants-doc-full/commondoc/bullet:make-bullet</code></a>
function.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/bullet.lisp#L73">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBULLET-3AMAKE-BULLET-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBULLET-3AMAKE-BULLET-20FUNCTION-29>40ants-doc-full/commondoc/bullet:make-bullet</a></div><div class=object-args><span class=locative-args>reference &amp;key arglist children name ignore-words dislocated-symbols</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBULLET-3AMAKE-BULLET-20FUNCTION-29></a></div><div class=bullet-content><p>Creates a CommonDoc node to represent a documentation item.</p><p>Documentation item can have an <code>ARGLIST</code>. If <code>NAME</code> is not given,
then it will be made from reference's object printed representation.</p><p>You can provide a <code>CHILDREN</code> arguments. It should be a list of CommonDoc nodes
or a single node.</p><p><code>IGNORE-WORDS</code> can be a list with the same meaning as <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc:defsection</code></a>.</p><p>If you want to completely ignore some symbol inside the reference's documentation,
then use <code>DISPLOCATED-SYMBOLS</code> argument.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/mapper.lisp#L163">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3AMAP-NODES-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3AMAP-NODES-20GENERIC-FUNCTION-29>40ants-doc-full/commondoc/mapper:map-nodes</a></div><div class=object-args><span class=locative-args>node func &amp;key on-going-down on-going-up</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3AMAP-NODES-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Recursively replaces or modifies a CommonDoc <code>NODE</code> with results of the <code>FUNC</code> call.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/mapper.lisp#L146">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3ANODE-SUPPORTS-CHILDREN-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3ANODE-SUPPORTS-CHILDREN-20GENERIC-FUNCTION-29>40ants-doc-full/commondoc/mapper:node-supports-children</a></div><div class=object-args><span class=locative-args>node</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3ANODE-SUPPORTS-CHILDREN-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>We have to use this function because some common-doc node types
supporting <code>COMMON-DOC:CHILDREN</code> do not share a common type.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/mapper.lisp#L61">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3AWITH-NODE-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3AWITH-NODE-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc-full/commondoc/mapper:with-node-package</a></div><div class=object-args><span class=locative-args>&amp;body body</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FMAPPER-3AWITH-NODE-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>This macro tracks current documentation piece's package and sets <i>package</i> accordingly.</p></div></div><h3>Reference Based Extensions<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40REFERENCE-BASED-EXTENSIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40REFERENCE-BASED-EXTENSIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>Let's see how to extend <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>40ants-doc-full/builder:render-to-files</code></a> and <code>M-.</code> navigation if there is
no first class object to represent the thing of interest. Recall
that <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-20FUNCTION-29"><code>40ants-doc/locatives/base:locate</code></a> returns a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a> object in this case:</p><pre><code class="cl-transcript">(40ants-doc/locatives/base:locate
   '40ants-doc:*discard-documentation-p*
   'variable)
==&gt; #&lt;40ANTS-DOC/REFERENCE:REFERENCE 40ANTS-DOC:*DISCARD-DOCUMENTATION-P* (VARIABLE)&gt;</code></pre><p>Some methods of <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29"><code>40ants-doc/source-api:find-source</code></a> generic-function defer to
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29"><code>40ants-doc/locatives/base:locate-and-find-source</code></a> generic-function,
which have <code>LOCATIVE-TYPE</code> in their argument
list for <code>EQL</code> specializing pleasure.</p><p>Here is a stripped down example of how the <a href="https://40ants.com/doc/#x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29" data-document="https://40ants.com/doc/" data-node="x-28VARIABLE-20-2840ANTS-DOC-2FLOCATIVES-3ALOCATIVE-29-29"><code>variable</code></a> locative is defined.
Pay attention how it defines a method of
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3AREFERENCE-TO-COMMONDOC-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3AREFERENCE-TO-COMMONDOC-20GENERIC-FUNCTION-29"><code>40ants-doc-full/commondoc/builder:reference-to-commondoc</code></a> generic-function instead of
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3ATO-COMMONDOC-20GENERIC-FUNCTION-29"><code>40ants-doc-full/commondoc/builder:to-commondoc</code></a>. This is because we have no
a lisp object to represent a variable and have to specialize method on
<code>LOCATIVE-TYPE</code> argument:</p><pre><code class="commonlisp">(define-locative-type variable (&amp;optional initform)
  &quot;Refers to a global special variable. INITFORM, or if not specified,
  the global value of the variable is included in the documentation.&quot;)

(defmethod locate-object (symbol (locative-type (eql 'variable)) locative-args)
  (assert (&lt;= (length locative-args) 1))
  (40ants-doc/reference:make-reference symbol (cons locative-type locative-args)))


(defmethod 40ants-doc-full/commondoc/builder:reference-to-commondoc ((symbol symbol) (locative-type (eql 'variable)) locative-args)
  (destructuring-bind (&amp;optional (initform nil initformp)) locative-args
    (let* ((reference (canonical-reference
                       (40ants-doc/reference:make-reference symbol
                                                            (cons locative-type
                                                                  locative-args))))
           (docstring (40ants-doc/docstring:get-docstring symbol 'variable))
           (arglist (multiple-value-bind (value unboundp) (40ants-doc-full/utils::symbol-global-value symbol)
                      (cond (initformp
                             (prin1-to-string initform))
                            (unboundp &quot;-unbound-&quot;)
                            (t
                             (prin1-to-string value)))))
           (children (when docstring
                       (parse-markdown docstring))))

      (40ants-doc-full/commondoc/bullet:make-bullet reference
                                                    :arglist arglist
                                                    :children children
                                                    :dislocated-symbols symbol))))

(defmethod locate-and-find-source (symbol (locative-type (eql 'variable))
                                   locative-args)
  (declare (ignore locative-args))
  (40ants-doc-full/locatives/utils::find-one-location (swank-backend:find-definitions symbol)
                                                      '(&quot;variable&quot; &quot;defvar&quot; &quot;defparameter&quot;
                                                        &quot;special-declaration&quot;)))

</code></pre><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/reference.lisp#L141">method</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29 id=x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29>40ants-doc/source-api:find-source</a></div><div class=object-args><span class=locative-args>(reference reference)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29></a></div><div class=bullet-content><p>If <code>REFERENCE</code> can be resolved to a non-reference, call <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29"><code>40ants-doc/source-api:find-source</code></a> generic-function
with it, else call <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29"><code>40ants-doc/locatives/base:locate-and-find-source</code></a> on the object,
locative-type, locative-args slots of <code>REFERENCE</code>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L100">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29>40ants-doc/locatives/base:locate-and-find-source</a></div><div class=object-args><span class=locative-args>object locative-type locative-args</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Called by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29"><code>40ants-doc/source-api:find-source</code></a>
on <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a> objects, this
function has essentially the same purpose as <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29"><code>40ants-doc/source-api:find-source</code></a> generic-function but it has
different arguments to allow specializing on <code>LOCATIVE-TYPE</code>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/base.lisp#L107">method</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20-28METHOD-20NIL-20-28T-20T-20T-29-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20-28METHOD-20NIL-20-28T-20T-20T-29-29-29>40ants-doc/locatives/base:locate-and-find-source</a></div><div class=object-args><span class=locative-args>object locative-type locative-args</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ALOCATE-AND-FIND-SOURCE-20-28METHOD-20NIL-20-28T-20T-20T-29-29-29></a></div><div class=bullet-content><p>This default implementation simply calls <code>40ants-doc/source-api:find-source</code> (<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20-28METHOD-20NIL-20-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-29-29-29"><code>1</code></a> <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FSOURCE-API-3AFIND-SOURCE-20GENERIC-FUNCTION-29"><code>2</code></a>) with <code>OBJECT</code>
which should cover the common case of a macro expanding to, for
instance, a defun but having its own locative type.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/builder.lisp#L25">generic-function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3AREFERENCE-TO-COMMONDOC-20GENERIC-FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3AREFERENCE-TO-COMMONDOC-20GENERIC-FUNCTION-29>40ants-doc-full/commondoc/builder:reference-to-commondoc</a></div><div class=object-args><span class=locative-args>obj locative-type locative-args</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FBUILDER-3AREFERENCE-TO-COMMONDOC-20GENERIC-FUNCTION-29></a></div><div class=bullet-content><p>Define a method for this generic function, when there is no
a lisp object to represent an object of given locative type.</p><p><code>LOCATIVE-TYPE</code> argument will be a symbol. <code>OBJ</code> argument also usually a symbol.
<code>LOCATIVE-ARGS</code> argument is a list which will be non-nil in case if
object is referenced in a <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc:defsection</code></a> like this:</p><pre><code class="lisp">(40ants-doc/source-api:find-source (method () (40ants-doc/reference:reference)))</code></pre><p>In this case <code>LOCATIVE-ARGS</code> argument will be <code>'(NIL (40ANTS-DOC/REFERENCE:REFERENCE))</code>.</p></div></div><p>We have covered the basic building blocks of reference based
extensions. Now let's see how the obscure
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FLOCATIVES-2FDEFINERS-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FLOCATIVES-2FDEFINERS-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>define-symbol-locative-type</code></a> and
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FDEFINE-DEFINER-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FDEFINE-DEFINER-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>define-definer-for-symbol-locative-type</code></a> macros work together to
simplify the common task of associating definition and documentation
with symbols in a certain context.</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/locatives/definers.lisp#L26">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FLOCATIVES-2FDEFINERS-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-FULL-2FLOCATIVES-2FDEFINERS-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc-full/locatives/definers:define-symbol-locative-type</a></div><div class=object-args><span class=locative-args>locative-type lambda-list &amp;body docstring</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FLOCATIVES-2FDEFINERS-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>Similar to <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ADEFINE-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FBASE-3ADEFINE-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc/locatives/base:define-locative-type</code></a> but it assumes that all things
locatable with <code>LOCATIVE-TYPE</code> are going to be just symbols defined
with a definer defined with <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FLOCATIVES-2FDEFINE-DEFINER-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FLOCATIVES-2FDEFINE-DEFINER-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc/locatives/define-definer:define-definer-for-symbol-locative-type</code></a>.
It is useful to attach documentation and source location to symbols
in a particular context. An example will make everything clear:</p><pre><code class="lisp">(define-symbol-locative-type direction ()
  &quot;A direction is a symbol. (After this `M-.` on `DIRECTION LOCATIVE`
                                   works and it can also be included in DEFSECTION forms.)&quot;)

(define-definer-for-symbol-locative-type define-direction direction
  &quot;With DEFINE-DIRECTION one can document what a symbol means when
interpreted as a direction.&quot;)

(define-direction up ()
  &quot;UP is equivalent to a coordinate delta of (0, -1).&quot;)</code></pre><p>After all this, <code>(UP DIRECTION)</code> refers to the <code>DEFINE-DIRECTION</code>
form above.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/locatives/define-definer.lisp#L19">macro</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-2FLOCATIVES-2FDEFINE-DEFINER-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29 id=x-2840ANTS-DOC-2FLOCATIVES-2FDEFINE-DEFINER-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29>40ants-doc/locatives/define-definer:define-definer-for-symbol-locative-type</a></div><div class=object-args><span class=locative-args>name locative-type &amp;body docstring</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-2FLOCATIVES-2FDEFINE-DEFINER-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29></a></div><div class=bullet-content><p>Define a macro with <code>NAME</code> which can be used to attach documentation,
a lambda-list and source location to a symbol in the context of
<code>LOCATIVE-TYPE</code>. The defined macro's arglist is (<code>SYMBOL</code> <code>LAMBDA-LIST</code>
<code>&amp;OPTIONAL</code> <code>DOCSTRING</code>). <code>LOCATIVE-TYPE</code> is assumed to have been defined
with <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FLOCATIVES-2FDEFINERS-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FLOCATIVES-2FDEFINERS-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc-full/locatives/definers:define-symbol-locative-type</code></a>.</p></div></div><h3>Including Images<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40INCLUDING-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40INCLUDING-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>Besides refering images in the Markdown syntax like was shown in the <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FMARKDOWN-3A-3A-40MARKDOWN-IMAGES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29"><code>Images</code></a> section,
you can construct CommonDoc documents including images as objects.</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/image.lisp#L109">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-20FUNCTION-29>40ants-doc-full/commondoc/image:local-image</a></div><div class=object-args><span class=locative-args>path &amp;key target-filename description width height</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-20FUNCTION-29></a></div><div class=bullet-content><p>Creates a note for rendering an image in the documentation.
Could be useful if you are constructing document from CommonDoc nodes.</p><p>The <code>SOURCE</code> argument should point to a file on local filesystem.</p><p>For example, here is how this function is used in the
new <a href="https://40ants.com/doc-plantuml/"><code>PlantUML</code> plugin</a>:</p><pre><code class="">(defmethod to-commondoc ((diagram diagram))
  (uiop:with-temporary-file (:pathname pathname
                             :type &quot;png&quot;
                             :keep t)
    (ensure-directories-exist pathname)

    (40ants-plantuml:render (diagram-code diagram)
                         pathname)
    (let ((image
            (local-image
             (namestring pathname)
             :target-filename (diagram-filename diagram))))
      (common-doc:make-paragraph image))))</code></pre><p>This code creates a temporary file, renders a png image into it
and then makes a paragraph with image, pointing to this temp file.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/image.lisp#L28">class</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-20CLASS-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-20CLASS-29>40ants-doc-full/commondoc/image:local-image</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-20CLASS-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/image.lisp#L32">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3AWIDTH-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-29-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3AWIDTH-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-29-29>40ants-doc-full/commondoc/image:width</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:width = nil)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3AWIDTH-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-29-29></a></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/commondoc/image.lisp#L35">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3AHEIGHT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-29-29 id=x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3AHEIGHT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-29-29>40ants-doc-full/commondoc/image:height</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:height = nil)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3AHEIGHT-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-FULL-2FCOMMONDOC-2FIMAGE-3ALOCAL-IMAGE-29-29></a></div></div><h3>Sections<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40SECTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40SECTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p><a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>40ants-doc:section</code></a> objects rarely need to be dissected since
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc:defsection</code></a> and <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FBUILDER-3ARENDER-TO-FILES-20FUNCTION-29"><code>40ants-doc-full/builder:render-to-files</code></a> cover most needs. However, it is plausible
that one wants to subclass them and maybe redefine how they are
presented.</p><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L216">class</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-20CLASS-29 id=x-2840ANTS-DOC-3ASECTION-20CLASS-29>40ants-doc:section</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-20CLASS-29></a></div><div class=bullet-content><p><a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a> stores its <code>:NAME</code>, <code>:TITLE</code>, <code>:PACKAGE</code>,
<code>:READTABLE</code> and <code>:ENTRIES</code> in <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>section</code></a> objects.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L217">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-NAME-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-NAME-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-name</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:name)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-NAME-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p>The name of the global variable whose value is
this <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ASECTION-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ASECTION-20CLASS-29"><code>section</code></a> object.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L223">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-package</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:package)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-PACKAGE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p><code>*PACKAGE*</code> will be bound to this package when
generating documentation for this section.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L229">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-READTABLE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-READTABLE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-readtable</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:readtable)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-READTABLE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p><code>*READTABLE*</code> will be bound to this when generating
documentation for this section.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L234">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-TITLE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-TITLE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-title</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:title)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-TITLE-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p><code>STRING</code> or <code>NIL</code>. Used in generated documentation.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L238">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-LINK-TITLE-TO-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-LINK-TITLE-TO-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-link-title-to</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:link-title-to = nil)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-LINK-TITLE-TO-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p>A <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a> or <code>NIL</code>. Used in generated documentation.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L243">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-ENTRIES-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-ENTRIES-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-entries</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:entries)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-ENTRIES-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p>A list of strings and <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FREFERENCE-3AREFERENCE-20CLASS-29"><code>40ants-doc/reference:reference</code></a> objects in the
order they occurred in <a href="https://40ants.com/doc/#x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-3ADEFSECTION-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>defsection</code></a>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L248">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-EXTERNAL-DOCS-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-EXTERNAL-DOCS-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-external-docs</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:external-docs = nil)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-EXTERNAL-DOCS-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p>A list of strings with <code>URL</code>s of other system's documentation.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L253">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-IGNORE-WORDS-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-IGNORE-WORDS-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-ignore-words</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:ignore-words = nil)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-IGNORE-WORDS-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p>A list of strings to not warn about.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/src/core.lisp#L259">reader</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-3ASECTION-IGNORE-PACKAGES-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29 id=x-2840ANTS-DOC-3ASECTION-IGNORE-PACKAGES-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29>40ants-doc:section-ignore-packages</a></div><div class=object-args><span class=locative-args></span><span class=locative-args>(:ignore-packages = nil)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-3ASECTION-IGNORE-PACKAGES-20-2840ANTS-DOC-2FLOCATIVES-3AREADER-2040ANTS-DOC-3ASECTION-29-29></a></div><div class=bullet-content><p>A list of strings denoting package names to not warn about.</p></div></div><h2>Transcripts<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>What are transcripts for? When writing a tutorial, one often wants
to include a <code>REPL</code> session with maybe a few defuns and a couple of
forms whose output or return values are shown. Also, in a function's
docstring an example call with concrete arguments and return values
speaks volumes. A transcript is a text that looks like a repl
session, but which has a light markup for printed output and return
values, while no markup (i.e. prompt) for lisp forms. The <code>PAX</code>
transcripts may include output and return values of all forms, or
only selected ones. In either case the transcript itself can be
easily generated from the source code.</p><p>The main worry associated with including examples in the
documentation is that they tend to get out-of-sync with the code.
This is solved by being able to parse back and update transcripts.
In fact, this is exactly what happens during documentation
generation with <code>PAX</code>. Code sections tagged <code>cl-transcript</code> are
retranscribed and checked for inconsistency (that is, any difference
in output or return values). If the consistency check fails, an
error is signalled that includes a reference to the object being
documented.</p><p>Going beyond documentation, transcript consistency checks can be
used for writing simple tests in a very readable form. For example:</p><pre><code class="cl-transcript">(+ 1 2)
=&gt; 3

(values (princ :hello) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1 2)</code></pre><p>All in all, transcripts are a handy tool especially when combined
with the Emacs support to regenerate them and with
<code>PYTHONIC-STRING-READER</code> and its triple-quoted strings that allow one
to work with nested strings with less noise. The triple-quote syntax
can be enabled with:</p><pre><code class="text">(in-readtable pythonic-string-syntax)
</code></pre><h3>Transcribing with Emacs<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-EMACS-INTEGRATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><p>Typical transcript usage from within Emacs is simple: add a lisp
form to a docstring or comment at any indentation level. Move the
cursor right after the end of the form as if you were to evaluate it
with <code>C-x C-e</code>. The cursor is marked by <code>#\^</code>:</p><pre><code class="text">This is part of a docstring.

```cl-transcript
(values (princ :hello) (list 1 2))^
```
</code></pre><p>Note that the use of fenced code blocks with the language tag
<code>cl-transcript</code> is only to tell <code>PAX</code> to perform consistency checks at
documentation generation time.</p><p>Now invoke the emacs command <code>mgl-pax-transcribe-last-expression</code> where the cursor
is and the fenced code block from the docstring becomes:</p><pre><code class="text">(values (princ :hello) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1 2)
^
</code></pre><p>Then you change the printed message to <code>:HELLO-WORLD</code> and add a comment to the second
return value:</p><pre><code class="text">(values (princ :hello-world) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1
    ;; This value is arbitrary.
    2)
</code></pre><p>When generating the documentation you get a
a warning:</p><pre><code class="text">WARNING:
   Transcription error. Inconsistent output found.

Source:
   &quot;HELLO&quot;

Output:
   &quot;HELLO-WORLD&quot;

Form:
   &quot;(values (princ :hello-world) (list 1 2))&quot;
</code></pre><p>because the printed output and the
first return value changed so you regenerate the documentation by
marking the region of bounded by <code>|</code> and the cursor at <code>^</code> in
the example:</p><pre><code class="text">|(values (princ :hello-world) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1
    ;; This value is arbitrary.
    2)
^
</code></pre><p>then invoke the emacs command <code>40ants-doc-retranscribe-region</code> to get:</p><pre><code class="text">(values (princ :hello-world) (list 1 2))
.. HELLO-WORLD
=&gt; :HELLO-WORLD
=&gt; (1
    ;; This value is arbitrary.
    2)
^
</code></pre><p>Note how the indentation and the comment of <code>(1 2)</code> was left alone
but the output and the first return value got updated.</p><p>Alternatively, <code>C-u 1 40ants-doc-transcribe-last-expression</code> will emit commented markup:</p><pre><code class="text">(values (princ :hello) (list 1 2))
;.. HELLO
;=&gt; :HELLO
;=&gt; (1 2)
</code></pre><p>This can be useful for producing results outside of the docstrings.</p><p><code>C-u 0 40ants-doc-retranscribe-region</code> will turn commented into
non-commented markup. In general, the numeric prefix argument is the
index of the syntax to be used in <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-2ASYNTAXES-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-2ASYNTAXES-2A-20-28VARIABLE-29-29"><code>40ants-doc-full/transcribe:*syntaxes*</code></a>. Without a
prefix argument <code>40ants-doc-retranscribe-region</code> will not change the
markup style.</p><p>Finally, not only do both functions work at any indentation level,
but in comments too:</p><pre><code class="text">;;;; (values (princ :hello) (list 1 2))
;;;; .. HELLO
;;;; =&gt; :HELLO
;;;; =&gt; (1 2)
</code></pre><p>Transcription support in emacs can be enabled by adding this to your
Emacs initialization file (or loading <code>elisp/transcribe.el</code>):</p><pre><code class="elisp">;;; Code transcription

(defun 40ants-doc-lisp-eval (form)
  (cond
   ((and (fboundp 'sly-connected-p)
         (sly-connected-p))
    (sly-eval form))
   ((and (fboundp 'slime-connected-p)
         (slime-connected-p))
    (slime-eval form))
   (t
    (error &quot;Nor SLY, nor SLIME is connected to the Lisp.&quot;))))


(defun 40ants-doc-transcribe-last-expression ()
  &quot;A bit like C-u C-x C-e (slime-eval-last-expression) that
inserts the output and values of the sexp before the point, this
does the same but with 40ANTS-DOC-FULL/TRANSCRIBE:TRANSCRIBE. Use a numeric prefix
argument as in index to select one of the Common Lisp
40ANTS-DOC-FULL/TRANSCRIBE:*SYNTAXES* as the SYNTAX argument to 40ANTS-DOC-FULL/TRANSCRIBE:TRANSCRIBE.
Without a prefix argument, the first syntax is used.&quot;
  (interactive)
  (insert
   (save-excursion
     (let* ((end (point))
            (start (progn (backward-sexp)
                          (move-beginning-of-line nil)
                          (point))))
       (40ants-doc-transcribe start end (40ants-doc-transcribe-syntax-arg)
                           nil nil nil)))))

(defun 40ants-doc-retranscribe-region (start end)
  &quot;Updates the transcription in the current region (as in calling
40ANTS-DOC-FULL/TRANSCRIBE:TRANSCRIBE with :UPDATE-ONLY T). Use a numeric prefix
argument as in index to select one of the Common Lisp
40ANTS-DOC-FULL/TRANSCRIBE:*SYNTAXES* as the SYNTAX argument to 40ANTS-DOC-FULL/TRANSCRIBE:TRANSCRIBE.
Without a prefix argument, the syntax of the input will not be
changed.&quot;
  (interactive &quot;r&quot;)
  (let ((point-at-start-p (= (point) start)))
    ;; We need to extend selection to the
    ;; beginning of line because otherwise
    ;; block's indentation might be wrong and
    ;; transcription parsing will fail
    (goto-char start)
    (move-beginning-of-line nil)
    (setf start
          (point))
    
    (let ((transcript (40ants-doc-transcribe start end
                                          (40ants-doc-transcribe-syntax-arg)
                                          t t nil)))
      (if point-at-start-p
          (save-excursion
            (goto-char start)
            (delete-region start end)
            (insert transcript))
        (save-excursion
          (goto-char start)
          (delete-region start end))
        (insert transcript)))))

(defun 40ants-doc-transcribe-syntax-arg ()
  (if current-prefix-arg
      (prefix-numeric-value current-prefix-arg)
    nil))

(defun 40ants-doc-transcribe (start end syntax update-only echo
                                    first-line-special-p)
  (let ((transcription
         (40ants-doc-lisp-eval
          `(cl:if (cl:find-package :40ants-doc-full/transcribe)
                  (uiop:symbol-call :40ants-doc-full/transcribe :transcribe-for-emacs
                                    ,(buffer-substring-no-properties start end)
                                    ',syntax ',update-only ',echo ',first-line-special-p)
                  t))))
    (if (eq transcription t)
        (error &quot;40ANTS-DOC is not loaded.&quot;)
      transcription)))

</code></pre><h3>Transcript API<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-3A-40TRANSCRIPT-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h3><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/transcribe.lisp#L157">function</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29 id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29>40ants-doc-full/transcribe:transcribe</a></div><div class=object-args><span class=locative-args>input output &amp;key update-only (include-no-output update-only) (include-no-value update-only) (echo t) check-consistency default-syntax (input-syntaxes \*syntaxes\*) (output-syntaxes \*syntaxes\*)</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29></a></div><div class=bullet-content><p>Read forms from <code>INPUT</code> and write them (if <code>ECHO</code>) to <code>OUTPUT</code>
followed by any output and return values produced by calling <code>EVAL</code> on
the form. <code>INPUT</code> can be a stream or a string, while <code>OUTPUT</code> can be a
stream or <code>NIL</code> in which case transcription goes into a string. The
return value is the <code>OUTPUT</code> stream or the string that was
constructed.</p><p>A simple example is this:</p><pre><code class="cl-transcript">(transcribe &quot;(princ 42) &quot; nil)
=&gt; &quot;(princ 42)
.. 42
=&gt; 42
&quot;</code></pre><p>However, the above may be a bit confusing since this documentation
uses <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29"><code>transcribe</code></a> markup syntax in this very example, so let's do it
differently. If we have a file with these contents:</p><pre><code class="lisp">(values (princ 42) (list 1 2))</code></pre><p>it is transcribed to:</p><pre><code class="lisp">(values (princ 42) (list 1 2))
.. 42
=&gt; 42
=&gt; (1 2)</code></pre><p>Output to all standard streams is captured and printed with
the <code>:OUTPUT</code> prefix (<code>&quot;..&quot;</code>). The return values above are printed
with the <code>:READABLE</code> prefix (<code>&quot;=&gt;&quot;</code>). Note how these prefixes are
always printed on a new line to facilitate parsing.</p><p><b>Updating</b></p><p><a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29"><code>transcribe</code></a> is able to parse its own output. If we transcribe the
previous output above, we get it back exactly. However, if we remove
all output markers, leave only a placeholder value marker and
pass <code>:UPDATE-ONLY</code> T with source:</p><pre><code class="lisp">(values (princ 42) (list 1 2))
=&gt;</code></pre><p>we get this:</p><pre><code class="lisp">(values (princ 42) (list 1 2))
=&gt; 42
=&gt; (1 2)</code></pre><p>With <code>UPDATE-ONLY</code>, printed output of a form is only transcribed if
there were output markers in the source. Similarly, with
<code>UPDATE-ONLY</code>, return values are only transcribed if there were value
markers in the source.</p><p><b>No Output/Values</b></p><p>If the form produces no output or returns no values, then whether or
not output and values are transcribed is controlled by
<code>INCLUDE-NO-OUTPUT</code> and <code>INCLUDE-NO-VALUE</code>, respectively. By default,
neither is on so:</p><pre><code class="lisp">(values)
..
=&gt;</code></pre><p>is transcribed to</p><pre><code class="lisp">(values)</code></pre><p>With <code>UPDATE-ONLY</code> true, we probably wouldn't like to lose those
markers since they were put there for a reason. Hence, with
<code>UPDATE-ONLY</code>, <code>INCLUDE-NO-OUTPUT</code> and <code>INCLUDE-NO-VALUE</code> default to true.
So with <code>UPDATE-ONLY</code> the above example is transcribed to:</p><pre><code class="lisp">(values)
..
=&gt; ; No value</code></pre><p>where the last line is the <code>:NO-VALUE</code> prefix.</p><p><b>Consistency Checks</b></p><p>If <code>CHECK-CONSISTENCY</code> is true, then <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29"><code>transcribe</code></a> signals a continuable
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29"><code>transcription-output-consistency-error</code></a> whenever a form's output as a
string is different from what was in <code>INPUT</code>, provided that <code>INPUT</code>
contained the output. Similary, for values, a continuable
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29"><code>transcription-values-consistency-error</code></a> is signalled if a value read
from the source does not print as the as the value returned by <code>EVAL</code>.
This allows readable values to be hand-indented without failing
consistency checks:</p><pre><code class="lisp">(list 1 2)
=&gt; (1
      2)</code></pre><p><b>Unreadable Values</b></p><p>The above scheme involves <code>READ</code>, so consistency of unreadable values
cannot be treated the same. In fact, unreadable values must even be
printed differently for transcribe to be able to read them back:</p><pre><code class="lisp">(defclass some-class () ())

(defmethod print-object ((obj some-class) stream)
  (print-unreadable-object (obj stream :type t)
    (format stream \&quot;~%~%end\&quot;)))

(make-instance 'some-class)
==&gt; #&lt;SOME-CLASS 
--&gt;
--&gt; end&gt;</code></pre><p>where <code>&quot;==&gt;&quot;</code> is the <code>:UNREADABLE</code> prefix and <code>&quot;--&gt;&quot;</code> is
the <code>:UNREADABLE-CONTINUATION</code> prefix. As with outputs, a consistency
check between an unreadable value from the source and the value from
<code>EVAL</code> is performed with <code>STRING</code>=. That is, the value from <code>EVAL</code> is
printed to a string and compared to the source value. Hence, any
change to unreadable values will break consistency checks. This is
most troublesome with instances of classes with the default
<code>PRINT-OBJECT</code> method printing the memory address. There is currently
no remedy for that, except for customizing <code>PRINT-OBJECT</code> or not
transcribing that kind of stuff.</p><p><b>Syntaxes</b></p><p>Finally, a transcript may employ different syntaxes for the output
and values of different forms. When <code>INPUT</code> is read, the syntax for
each form is determined by trying to match all prefixes from all
syntaxes in <code>INPUT-SYNTAXES</code> against a line. If there are no output or
values for a form in <code>INPUT</code>, then the syntax remains undetermined.</p><p>When <code>OUTPUT</code> is written, the prefixes to be used are looked up in
<code>DEFAULT-SYNTAX</code> of <code>OUTPUT-SYNTAXES</code>, if <code>DEFAULT-SYNTAX</code> is not <code>NIL</code>. If
<code>DEFAULT-SYNTAX</code> is <code>NIL</code>, then the syntax used by the same form in the
<code>INPUT</code> is used or (if that could not be determined) the syntax of the
previous form. If there was no previous form, then the first syntax
if <code>OUTPUT-SYNTAXES</code> is used.</p><p>To produce a transcript that's executable Lisp code,
use <code>:DEFAULT-SYNTAX</code> <code>:COMMENTED-1</code>:</p><pre><code class="lisp">(make-instance 'some-class)
;==&gt; #&lt;SOME-CLASS
;--&gt;
;--&gt; end&gt;

(list 1 2)
;=&gt; (1
;-&gt;    2)</code></pre><p>To translate the above to uncommented syntax,
use <code>:DEFAULT-SYNTAX</code> <code>:DEFAULT</code>. If <code>DEFAULT-SYNTAX</code> is <code>NIL</code> (the
default), the same syntax will be used in the output as in the input
as much as possible.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/transcribe.lisp#L104">variable</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-2ASYNTAXES-2A-20-28VARIABLE-29-29 id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-2ASYNTAXES-2A-20-28VARIABLE-29-29>40ants-doc-full/transcribe:*syntaxes*</a></div><div class=object-args><span class=locative-args>((:DEFAULT (:OUTPUT &quot;..&quot;) (:NO-VALUE &quot;=&gt; ; No value&quot;) (:READABLE &quot;=&gt;&quot;)
  (:UNREADABLE &quot;==&gt;&quot;) (:UNREADABLE-CONTINUATION &quot;--&gt;&quot;))
 (:COMMENTED-1 (:OUTPUT &quot;;..&quot;) (:NO-VALUE &quot;;=&gt; ; No value&quot;) (:READABLE &quot;;=&gt;&quot;)
  (:READABLE-CONTINUATION &quot;;-&gt;&quot;) (:UNREADABLE &quot;;==&gt;&quot;)
  (:UNREADABLE-CONTINUATION &quot;;--&gt;&quot;))
 (:COMMENTED-2 (:OUTPUT &quot;;;..&quot;) (:NO-VALUE &quot;;;=&gt; ; No value&quot;)
  (:READABLE &quot;;;=&gt;&quot;) (:READABLE-CONTINUATION &quot;;;-&gt;&quot;) (:UNREADABLE &quot;;;==&gt;&quot;)
  (:UNREADABLE-CONTINUATION &quot;;;--&gt;&quot;)))</span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3A-2ASYNTAXES-2A-20-28VARIABLE-29-29></a></div><div class=bullet-content><p>The default syntaxes used by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29"><code>transcribe</code></a> for reading and writing
lines containing output and values of an evaluated form.</p><p>A syntax is a list of of the form <code>(SYNTAX-ID &amp;REST PREFIXES)</code> where
<code>prefixes</code> is a list of <code>(PREFIX-ID PREFIX-STRING)</code> elements. For
example the syntax <code>:COMMENTED-1</code> looks like this:</p><pre><code class="lisp">(:commented-1
 (:output &quot;;..&quot;)
 (:no-value &quot;;=&gt;  No value&quot;)
 (:readable &quot;;=&gt;&quot;)
 (:readable-continuation &quot;;-&gt;&quot;)
 (:unreadable &quot;;==&gt;&quot;)
 (:unreadable-continuation &quot;;--&gt;&quot;))</code></pre><p>All of the above prefixes must be defined for every syntax except
for <code>:READABLE-CONTINUATION</code>. If that's missing (as in the <code>:DEFAULT</code>
syntax), then the following value is read with <code>READ</code> and printed with
<code>PRIN1</code> (hence no need to mark up the following lines).</p><p>When writing, an extra space is added automatically if the line to
be prefixed is not empty. Similarly, the first space following the
prefix discarded when reading.</p><p>See <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29"><code>transcribe</code></a> for how the actual syntax to be used is selected.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/transcribe.lisp#L931">condition</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-ERROR-20CONDITION-29 id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-ERROR-20CONDITION-29>40ants-doc-full/transcribe:transcription-error</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-ERROR-20CONDITION-29></a></div><div class=bullet-content><p>Represents syntactic errors in the <code>INPUT</code> argument
of <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29"><code>transcribe</code></a> and also serves as the superclass of
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-CONSISTENCY-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-CONSISTENCY-ERROR-20CONDITION-29"><code>transcription-consistency-error</code></a>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/transcribe.lisp#L994">condition</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-CONSISTENCY-ERROR-20CONDITION-29 id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-CONSISTENCY-ERROR-20CONDITION-29>40ants-doc-full/transcribe:transcription-consistency-error</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-CONSISTENCY-ERROR-20CONDITION-29></a></div><div class=bullet-content><p>A common superclass for
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29"><code>transcription-output-consistency-error</code></a> and
<a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29"><code>transcription-values-consistency-error</code></a>.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/transcribe.lisp#L1000">condition</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29 id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29>40ants-doc-full/transcribe:transcription-output-consistency-error</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29></a></div><div class=bullet-content><p>Signaled (with <code>CERROR</code>) by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29"><code>transcribe</code></a> when invoked
with <code>:CHECK-CONSISTENCY</code> and the output of a form is not the same as
what was parsed.</p></div></div><div class=reference-bullet><div class=reference-bullet-header><a class=locative-type href="https://github.com/40ants/doc/blob/b59188c3fef94cb72b91869e1b0bed001067e8d5/full/transcribe.lisp#L1007">condition</a><div class=reference-object><div class=object-name><a href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29 id=x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29>40ants-doc-full/transcribe:transcription-values-consistency-error</a></div><div class=object-args><span class=locative-args></span></div></div><a class=bullet-link href=#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29></a></div><div class=bullet-content><p>Signaled (with <code>CERROR</code>) by <a href="https://40ants.com/doc/#x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-FULL-2FTRANSCRIBE-3ATRANSCRIBE-20FUNCTION-29"><code>transcribe</code></a> when invoked
with <code>:CHECK-CONSISTENCY</code> and the values of a form are inconsistent
with their parsed representation.</p></div></div><h2>TODO<a class=header-link
     href=#x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TODO-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-2840ANTS-DOC-FULL-2FDOC-3A-3A-40TODO-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p><s>Refactor code and make a core package with only a few dependencies.</s></p></li><li><p><s>Add warnings on <code>UPPERCASED</code> symbols in docstrings which aren't found in the package and can't be cross referenced.</s></p></li><li><p><s>Support <code>SLY</code> and make both <code>SLIME</code> and <code>SLY</code> integrations optional.</s></p></li><li><p><s>Add a search facility which will build an index for static file like Sphinx does.</s></p></li><li><p><s>Separate markup parsing and result rendering code to support markups other than Markdown and <code>HTML</code>.</s></p></li><li><p><s>Add a new section type to render ChangeLog.</s></p></li><li><p><s>Support custom <code>HTML</code> themes.</s></p></li><li><p><s>Generate <code>RSS</code> or Atom feed out of changelog items, defined with
  <a href="https://40ants.com/doc/#x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/doc/" data-node="x-2840ANTS-DOC-2FCHANGELOG-3ADEFCHANGELOG-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>40ants-doc/changelog:defchangelog</code></a> macro.</s></p></li><li><p>Make some warnings compile-time for defsection and show them in the Emacs, if possible.</p></li></ul>
    <script type="text/javascript">
             MathJax = { 
              options: {
                ignoreHtmlClass: 'page',
                processHtmlClass: 'content'
              },
              tex: {
                 inlineMath: [['$','$']]
              },
              svg: {
                 fontCache: 'global'
              }
             };
        </script>
    <script type="text/javascript"
            src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script type="text/javascript" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
   </div><div class=footer>
    <hr class=separator>
    <p class=fineprint>Created with passion by <em>40Ants</em><a class=lisp-logo
     href="http://lisp-lang.org/">
      <img
           src="https://40ants.com/img/made-with-lisp.svg"></a>
   </div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Ключ для localStorage
  const STORAGE_KEY = '40ants-doc-full-menu-state';
  
  // Загружаем сохраненное состояние меню
  function loadMenuState() {
    try {
      const savedState = localStorage.getItem(STORAGE_KEY);
      return savedState ? JSON.parse(savedState) : {};
    } catch (e) {
      console.error('Ошибка при загрузке состояния меню:', e);
      return {};
    }
  }
  
  // Сохраняем текущее состояние меню
  function saveMenuState(state) {
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    } catch (e) {
      console.error('Ошибка при сохранении состояния меню:', e);
    }
  }
  
  // Получаем уникальный идентификатор для пункта меню
  function getMenuItemId(item) {
    const link = item.querySelector('a');
    if (!link) return null;
    
    // Используем текст ссылки как идентификатор
    // Можно также использовать href, но он может меняться в зависимости от текущей страницы
    return link.innerText.trim();
  }
  
  // Загружаем сохраненное состояние
  const menuState = loadMenuState();
  
  // Находим все пункты меню с подпунктами
  const menuItems = document.querySelectorAll('.sidebar li');
  
  // Обрабатываем каждый пункт меню
  menuItems.forEach(item => {
    const subMenu = item.querySelector('ul');
    
    // Если у пункта есть подменю
    if (subMenu) {
      const itemId = getMenuItemId(item);
      item.classList.add('has-children');
      
      // Восстанавливаем состояние из localStorage, если оно сохранено
      if (itemId && menuState[itemId]) {
        item.classList.add('expanded');
      }
      
      // Добавляем обработчик клика
      const link = item.querySelector('a');
      if (link) {
        link.addEventListener('click', function(e) {
          // Останавливаем переход по ссылке только если кликнули по пункту с подменю
          if (item.classList.contains('has-children')) {
            e.preventDefault();
            
            // Переключаем класс для раскрытия/скрытия
            item.classList.toggle('expanded');
            
            // Сохраняем новое состояние
            if (itemId) {
              if (item.classList.contains('expanded')) {
                menuState[itemId] = true;
              } else {
                delete menuState[itemId];
              }
              saveMenuState(menuState);
            }
          }
        });
      }
    }
  });
  
  // Функция для поиска и раскрытия родителей активного пункта
  function expandActiveItemParents() {
    const activeItem = document.querySelector('.sidebar li.active');
    if (activeItem) {
      let parent = activeItem.parentElement;
      
      while (parent) {
        if (parent.tagName === 'UL' && parent.parentElement && parent.parentElement.tagName === 'LI') {
          parent.parentElement.classList.add('expanded');
          parent.parentElement.classList.add('active-parent');
          
          // Сохраняем состояние активного родителя
          const parentItem = parent.parentElement;
          const parentId = getMenuItemId(parentItem);
          if (parentId) {
            menuState[parentId] = true;
          }
        }
        parent = parent.parentElement;
      }
      
      // Сохраняем обновленное состояние после раскрытия активных родителей
      saveMenuState(menuState);
    }
  }
  
  // Запускаем функцию для текущей страницы
  expandActiveItemParents();
});
</script>


  </div>
 </body>
</html>